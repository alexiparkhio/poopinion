function cov_29i6p5v5qf(){var path="C:\\Users\\Alex\\bootcamp\\collab\\skylab-bootcamp-202001\\staff\\alex-park\\poopinion\\poopinion-api\\logic\\retrieve-top-toilets.spec.js";var hash="1d9647b0352f88b19676312ea5d6c8e4bd2097f2";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Alex\\bootcamp\\collab\\skylab-bootcamp-202001\\staff\\alex-park\\poopinion\\poopinion-api\\logic\\retrieve-top-toilets.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:38},end:{line:3,column:45}},"2":{start:{line:4,column:19},end:{line:4,column:34}},"3":{start:{line:5,column:26},end:{line:5,column:30}},"4":{start:{line:6,column:27},end:{line:6,column:60}},"5":{start:{line:7,column:56},end:{line:7,column:81}},"6":{start:{line:9,column:0},end:{line:152,column:2}},"7":{start:{line:10,column:4},end:{line:14,column:5}},"8":{start:{line:11,column:8},end:{line:13,column:28}},"9":{start:{line:12,column:24},end:{line:12,column:99}},"10":{start:{line:16,column:187},end:{line:16,column:189}},"11":{start:{line:16,column:201},end:{line:16,column:203}},"12":{start:{line:17,column:20},end:{line:17,column:52}},"13":{start:{line:18,column:20},end:{line:18,column:33}},"14":{start:{line:20,column:4},end:{line:53,column:6}},"15":{start:{line:21,column:8},end:{line:21,column:33}},"16":{start:{line:22,column:8},end:{line:22,column:39}},"17":{start:{line:23,column:8},end:{line:23,column:44}},"18":{start:{line:24,column:8},end:{line:24,column:41}},"19":{start:{line:25,column:8},end:{line:25,column:35}},"20":{start:{line:26,column:8},end:{line:26,column:59}},"21":{start:{line:27,column:8},end:{line:27,column:35}},"22":{start:{line:28,column:8},end:{line:28,column:41}},"23":{start:{line:29,column:8},end:{line:29,column:46}},"24":{start:{line:30,column:8},end:{line:30,column:43}},"25":{start:{line:31,column:8},end:{line:31,column:35}},"26":{start:{line:32,column:8},end:{line:32,column:36}},"27":{start:{line:33,column:8},end:{line:33,column:58}},"28":{start:{line:34,column:8},end:{line:34,column:59}},"29":{start:{line:35,column:8},end:{line:35,column:34}},"30":{start:{line:36,column:8},end:{line:36,column:36}},"31":{start:{line:38,column:8},end:{line:38,column:46}},"32":{start:{line:39,column:8},end:{line:39,column:42}},"33":{start:{line:40,column:8},end:{line:40,column:74}},"34":{start:{line:41,column:8},end:{line:41,column:74}},"35":{start:{line:42,column:8},end:{line:42,column:74}},"36":{start:{line:43,column:8},end:{line:43,column:50}},"37":{start:{line:44,column:8},end:{line:44,column:47}},"38":{start:{line:46,column:8},end:{line:46,column:47}},"39":{start:{line:47,column:8},end:{line:47,column:43}},"40":{start:{line:48,column:8},end:{line:48,column:75}},"41":{start:{line:49,column:8},end:{line:49,column:75}},"42":{start:{line:50,column:8},end:{line:50,column:75}},"43":{start:{line:51,column:8},end:{line:51,column:51}},"44":{start:{line:52,column:8},end:{line:52,column:49}},"45":{start:{line:55,column:4},end:{line:133,column:6}},"46":{start:{line:56,column:8},end:{line:86,column:9}},"47":{start:{line:57,column:12},end:{line:85,column:32}},"48":{start:{line:59,column:20},end:{line:59,column:44}},"49":{start:{line:60,column:20},end:{line:60,column:46}},"50":{start:{line:62,column:28},end:{line:62,column:175}},"51":{start:{line:64,column:20},end:{line:64,column:52}},"52":{start:{line:65,column:20},end:{line:65,column:54}},"53":{start:{line:67,column:20},end:{line:67,column:54}},"54":{start:{line:68,column:20},end:{line:68,column:56}},"55":{start:{line:70,column:20},end:{line:70,column:67}},"56":{start:{line:72,column:28},end:{line:72,column:286}},"57":{start:{line:74,column:20},end:{line:74,column:54}},"58":{start:{line:75,column:20},end:{line:75,column:56}},"59":{start:{line:77,column:20},end:{line:77,column:49}},"60":{start:{line:78,column:20},end:{line:78,column:51}},"61":{start:{line:80,column:20},end:{line:80,column:47}},"62":{start:{line:81,column:20},end:{line:81,column:49}},"63":{start:{line:83,column:20},end:{line:83,column:98}},"64":{start:{line:88,column:8},end:{line:131,column:10}},"65":{start:{line:89,column:12},end:{line:130,column:32}},"66":{start:{line:91,column:20},end:{line:91,column:54}},"67":{start:{line:92,column:20},end:{line:92,column:59}},"68":{start:{line:94,column:20},end:{line:94,column:74}},"69":{start:{line:96,column:20},end:{line:128,column:21}},"70":{start:{line:97,column:34},end:{line:97,column:44}},"71":{start:{line:99,column:24},end:{line:99,column:58}},"72":{start:{line:100,column:24},end:{line:100,column:55}},"73":{start:{line:101,column:24},end:{line:101,column:71}},"74":{start:{line:102,column:24},end:{line:102,column:63}},"75":{start:{line:103,column:24},end:{line:103,column:69}},"76":{start:{line:104,column:24},end:{line:104,column:80}},"77":{start:{line:105,column:24},end:{line:105,column:77}},"78":{start:{line:106,column:24},end:{line:106,column:89}},"79":{start:{line:107,column:24},end:{line:107,column:81}},"80":{start:{line:108,column:24},end:{line:108,column:101}},"81":{start:{line:109,column:24},end:{line:109,column:101}},"82":{start:{line:110,column:24},end:{line:110,column:101}},"83":{start:{line:111,column:24},end:{line:111,column:97}},"84":{start:{line:113,column:34},end:{line:113,column:44}},"85":{start:{line:115,column:24},end:{line:115,column:58}},"86":{start:{line:116,column:24},end:{line:116,column:56}},"87":{start:{line:117,column:24},end:{line:117,column:72}},"88":{start:{line:118,column:24},end:{line:118,column:64}},"89":{start:{line:119,column:24},end:{line:119,column:70}},"90":{start:{line:120,column:24},end:{line:120,column:81}},"91":{start:{line:121,column:24},end:{line:121,column:77}},"92":{start:{line:122,column:24},end:{line:122,column:90}},"93":{start:{line:123,column:24},end:{line:123,column:82}},"94":{start:{line:124,column:24},end:{line:124,column:102}},"95":{start:{line:125,column:24},end:{line:125,column:102}},"96":{start:{line:126,column:24},end:{line:126,column:102}},"97":{start:{line:127,column:24},end:{line:127,column:98}},"98":{start:{line:135,column:4},end:{line:146,column:6}},"99":{start:{line:136,column:8},end:{line:136,column:78}},"100":{start:{line:136,column:25},end:{line:136,column:77}},"101":{start:{line:138,column:8},end:{line:145,column:10}},"102":{start:{line:140,column:12},end:{line:144,column:18}},"103":{start:{line:142,column:20},end:{line:142,column:59}},"104":{start:{line:143,column:20},end:{line:143,column:54}},"105":{start:{line:148,column:4},end:{line:151,column:5}},"106":{start:{line:149,column:8},end:{line:150,column:46}},"107":{start:{line:150,column:24},end:{line:150,column:45}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:31},end:{line:9,column:32}},loc:{start:{line:9,column:37},end:{line:152,column:1}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:10,column:11},end:{line:10,column:12}},loc:{start:{line:11,column:8},end:{line:13,column:28}},line:11},"2":{name:"(anonymous_2)",decl:{start:{line:12,column:18},end:{line:12,column:19}},loc:{start:{line:12,column:24},end:{line:12,column:99}},line:12},"3":{name:"(anonymous_3)",decl:{start:{line:13,column:18},end:{line:13,column:19}},loc:{start:{line:13,column:24},end:{line:13,column:27}},line:13},"4":{name:"(anonymous_4)",decl:{start:{line:20,column:15},end:{line:20,column:16}},loc:{start:{line:20,column:21},end:{line:53,column:5}},line:20},"5":{name:"(anonymous_5)",decl:{start:{line:55,column:52},end:{line:55,column:53}},loc:{start:{line:55,column:58},end:{line:133,column:5}},line:55},"6":{name:"(anonymous_6)",decl:{start:{line:56,column:19},end:{line:56,column:20}},loc:{start:{line:57,column:12},end:{line:85,column:32}},line:57},"7":{name:"(anonymous_7)",decl:{start:{line:58,column:22},end:{line:58,column:23}},loc:{start:{line:58,column:41},end:{line:61,column:17}},line:58},"8":{name:"(anonymous_8)",decl:{start:{line:62,column:22},end:{line:62,column:23}},loc:{start:{line:62,column:28},end:{line:62,column:175}},line:62},"9":{name:"(anonymous_9)",decl:{start:{line:63,column:22},end:{line:63,column:23}},loc:{start:{line:63,column:58},end:{line:71,column:17}},line:63},"10":{name:"(anonymous_10)",decl:{start:{line:72,column:22},end:{line:72,column:23}},loc:{start:{line:72,column:28},end:{line:72,column:286}},line:72},"11":{name:"(anonymous_11)",decl:{start:{line:73,column:22},end:{line:73,column:23}},loc:{start:{line:73,column:77},end:{line:84,column:17}},line:73},"12":{name:"(anonymous_12)",decl:{start:{line:85,column:22},end:{line:85,column:23}},loc:{start:{line:85,column:28},end:{line:85,column:31}},line:85},"13":{name:"(anonymous_13)",decl:{start:{line:88,column:79},end:{line:88,column:80}},loc:{start:{line:88,column:85},end:{line:131,column:9}},line:88},"14":{name:"(anonymous_14)",decl:{start:{line:90,column:22},end:{line:90,column:23}},loc:{start:{line:90,column:33},end:{line:129,column:17}},line:90},"15":{name:"(anonymous_15)",decl:{start:{line:130,column:22},end:{line:130,column:23}},loc:{start:{line:130,column:28},end:{line:130,column:31}},line:130},"16":{name:"(anonymous_16)",decl:{start:{line:135,column:42},end:{line:135,column:43}},loc:{start:{line:135,column:48},end:{line:146,column:5}},line:135},"17":{name:"(anonymous_17)",decl:{start:{line:136,column:19},end:{line:136,column:20}},loc:{start:{line:136,column:25},end:{line:136,column:77}},line:136},"18":{name:"(anonymous_18)",decl:{start:{line:136,column:67},end:{line:136,column:68}},loc:{start:{line:136,column:73},end:{line:136,column:76}},line:136},"19":{name:"(anonymous_19)",decl:{start:{line:138,column:82},end:{line:138,column:83}},loc:{start:{line:138,column:88},end:{line:145,column:9}},line:138},"20":{name:"(anonymous_20)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:33},end:{line:144,column:17}},line:141},"21":{name:"(anonymous_21)",decl:{start:{line:148,column:10},end:{line:148,column:11}},loc:{start:{line:149,column:8},end:{line:150,column:46}},line:149},"22":{name:"(anonymous_22)",decl:{start:{line:150,column:18},end:{line:150,column:19}},loc:{start:{line:150,column:24},end:{line:150,column:45}},line:150}},branchMap:{"0":{loc:{start:{line:96,column:20},end:{line:128,column:21}},type:"if",locations:[{start:{line:96,column:20},end:{line:128,column:21}},{start:{line:96,column:20},end:{line:128,column:21}}],line:96}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1d9647b0352f88b19676312ea5d6c8e4bd2097f2"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_29i6p5v5qf=function(){return actualCoverage;};return actualCoverage;}cov_29i6p5v5qf();cov_29i6p5v5qf().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL}}=(cov_29i6p5v5qf().s[1]++,process);const{expect}=(cov_29i6p5v5qf().s[2]++,require('chai'));const{random,floor}=(cov_29i6p5v5qf().s[3]++,Math);const retrieveTopToilets=(cov_29i6p5v5qf().s[4]++,require('./retrieve-top-toilets'));const{mongoose,models:{User,Toilet,Comment}}=(cov_29i6p5v5qf().s[5]++,require('poopinion-data'));cov_29i6p5v5qf().s[6]++;describe('retrieveTopToilets',()=>{cov_29i6p5v5qf().f[0]++;cov_29i6p5v5qf().s[7]++;before(()=>{cov_29i6p5v5qf().f[1]++;cov_29i6p5v5qf().s[8]++;return mongoose.connect(TEST_MONGODB_URL,{useNewUrlParser:true,useUnifiedTopology:true}).then(()=>{cov_29i6p5v5qf().f[2]++;cov_29i6p5v5qf().s[9]++;return Promise.all([User.deleteMany(),Toilet.deleteMany(),Comment.deleteMany()]);}).then(()=>{cov_29i6p5v5qf().f[3]++;});});let name,name2,surname,surname2,email,email2,password,password2,age,age2,gender,gender2,_id,_id2,place2,_toiletId,_toiletId2,_commentId,_commentId2,place,rating=(cov_29i6p5v5qf().s[10]++,{}),rating2=(cov_29i6p5v5qf().s[11]++,{});const GENDERS=(cov_29i6p5v5qf().s[12]++,['male','female','non-binary']);const YESORNO=(cov_29i6p5v5qf().s[13]++,[true,false]);cov_29i6p5v5qf().s[14]++;beforeEach(()=>{cov_29i6p5v5qf().f[4]++;cov_29i6p5v5qf().s[15]++;name=`name-${random()}`;cov_29i6p5v5qf().s[16]++;surname=`surname-${random()}`;cov_29i6p5v5qf().s[17]++;email=`email-${random()}@mail.com`;cov_29i6p5v5qf().s[18]++;password=`password-${random()}`;cov_29i6p5v5qf().s[19]++;age=floor(random()*120);cov_29i6p5v5qf().s[20]++;gender2=GENDERS[floor(random()*GENDERS.length)];cov_29i6p5v5qf().s[21]++;name2=`name2-${random()}`;cov_29i6p5v5qf().s[22]++;surname2=`surname2-${random()}`;cov_29i6p5v5qf().s[23]++;email2=`email2-${random()}@mail.com`;cov_29i6p5v5qf().s[24]++;password2=`password2-${random()}`;cov_29i6p5v5qf().s[25]++;age=floor(random()*120);cov_29i6p5v5qf().s[26]++;age2=floor(random()*120);cov_29i6p5v5qf().s[27]++;gender=GENDERS[floor(random()*GENDERS.length)];cov_29i6p5v5qf().s[28]++;gender2=GENDERS[floor(random()*GENDERS.length)];cov_29i6p5v5qf().s[29]++;place=`house of ${name}`;cov_29i6p5v5qf().s[30]++;place2=`house of ${name2}`;cov_29i6p5v5qf().s[31]++;rating.cleanness=floor(random()*5);cov_29i6p5v5qf().s[32]++;rating.looks=floor(random()*5);cov_29i6p5v5qf().s[33]++;rating.multipleToilets=YESORNO[floor(random()*YESORNO.length)];cov_29i6p5v5qf().s[34]++;rating.paymentRequired=YESORNO[floor(random()*YESORNO.length)];cov_29i6p5v5qf().s[35]++;rating.paperDeployment=YESORNO[floor(random()*YESORNO.length)];cov_29i6p5v5qf().s[36]++;rating.overallRating=floor(random()*5);cov_29i6p5v5qf().s[37]++;rating.textArea=`opinion-${random()}`;cov_29i6p5v5qf().s[38]++;rating2.cleanness=floor(random()*5);cov_29i6p5v5qf().s[39]++;rating2.looks=floor(random()*5);cov_29i6p5v5qf().s[40]++;rating2.multipleToilets=YESORNO[floor(random()*YESORNO.length)];cov_29i6p5v5qf().s[41]++;rating2.paymentRequired=YESORNO[floor(random()*YESORNO.length)];cov_29i6p5v5qf().s[42]++;rating2.paperDeployment=YESORNO[floor(random()*YESORNO.length)];cov_29i6p5v5qf().s[43]++;rating2.overallRating=floor(random()*5);cov_29i6p5v5qf().s[44]++;rating2.textArea=`opinion2-${random()}`;});cov_29i6p5v5qf().s[45]++;describe('when user and the toilet post exist',()=>{cov_29i6p5v5qf().f[5]++;cov_29i6p5v5qf().s[46]++;beforeEach(()=>{cov_29i6p5v5qf().f[6]++;cov_29i6p5v5qf().s[47]++;return Promise.all([User.create({name,surname,email,password,age,gender}),User.create({name:name2,surname:surname2,email:email2,password:password2,age:age2,gender:gender2})]).then(([user,user2])=>{cov_29i6p5v5qf().f[7]++;cov_29i6p5v5qf().s[48]++;_id=user.id.toString();cov_29i6p5v5qf().s[49]++;_id2=user2.id.toString();}).then(()=>{cov_29i6p5v5qf().f[8]++;cov_29i6p5v5qf().s[50]++;return Promise.all([Toilet.create({publisher:_id,place}),Toilet.create({publisher:_id2,place:place2}),User.findById(_id),User.findById(_id2)]);}).then(([toilet,toilet2,user,user2])=>{cov_29i6p5v5qf().f[9]++;cov_29i6p5v5qf().s[51]++;_toiletId=toilet.id.toString();cov_29i6p5v5qf().s[52]++;_toiletId2=toilet2.id.toString();cov_29i6p5v5qf().s[53]++;user.publishedToilets.push(toilet);cov_29i6p5v5qf().s[54]++;user2.publishedToilets.push(toilet2);cov_29i6p5v5qf().s[55]++;return Promise.all([user.save(),user2.save()]);}).then(()=>{cov_29i6p5v5qf().f[10]++;cov_29i6p5v5qf().s[56]++;return Promise.all([Comment.create({publisher:_id,commentedAt:_toiletId,rating}),Comment.create({publisher:_id2,commentedAt:_toiletId2,rating:rating2}),Toilet.findById(_toiletId),Toilet.findById(_toiletId2),User.findById(_id),User.findById(_id2)]);}).then(([comment,comment2,toilet,toilet2,user,user2])=>{cov_29i6p5v5qf().f[11]++;cov_29i6p5v5qf().s[57]++;_commentId=comment.id.toString();cov_29i6p5v5qf().s[58]++;_commentId2=comment2.id.toString();cov_29i6p5v5qf().s[59]++;toilet.comments.push(comment);cov_29i6p5v5qf().s[60]++;toilet2.comments.push(comment2);cov_29i6p5v5qf().s[61]++;user.comments.push(comment);cov_29i6p5v5qf().s[62]++;user2.comments.push(comment2);cov_29i6p5v5qf().s[63]++;return Promise.all([toilet.save(),toilet2.save(),user.save(),user2.save()]);}).then(()=>{cov_29i6p5v5qf().f[12]++;});});cov_29i6p5v5qf().s[64]++;it('should successfully retrieve all toilets and sort them by rating',()=>{cov_29i6p5v5qf().f[13]++;cov_29i6p5v5qf().s[65]++;return retrieveTopToilets().then(toilets=>{cov_29i6p5v5qf().f[14]++;cov_29i6p5v5qf().s[66]++;expect(toilets.length).to.equal(2);cov_29i6p5v5qf().s[67]++;expect(toilets).to.be.instanceOf(Array);cov_29i6p5v5qf().s[68]++;expect(toilets[0].score>toilets[1].score).to.be.true;cov_29i6p5v5qf().s[69]++;if(toilets[0].comments[0].rating.textArea===rating.textArea){cov_29i6p5v5qf().b[0][0]++;const t=(cov_29i6p5v5qf().s[70]++,toilets[0]);cov_29i6p5v5qf().s[71]++;expect(t).to.be.instanceOf(Object);cov_29i6p5v5qf().s[72]++;expect(t.place).to.equal(place);cov_29i6p5v5qf().s[73]++;expect(t.publisher.id.toString()).to.equal(_id);cov_29i6p5v5qf().s[74]++;expect(t.publisher.name).to.equal(name);cov_29i6p5v5qf().s[75]++;expect(t.publisher.surname).to.equal(surname);cov_29i6p5v5qf().s[76]++;expect(t.comments[0].id.toString()).to.equal(_commentId);cov_29i6p5v5qf().s[77]++;expect(t.comments[0].rating).to.be.instanceOf(Object);cov_29i6p5v5qf().s[78]++;expect(t.comments[0].rating.cleanness).to.equal(rating.cleanness);cov_29i6p5v5qf().s[79]++;expect(t.comments[0].rating.looks).to.equal(rating.looks);cov_29i6p5v5qf().s[80]++;expect(t.comments[0].rating.multipleToilets).to.equal(rating.multipleToilets);cov_29i6p5v5qf().s[81]++;expect(t.comments[0].rating.paymentRequired).to.equal(rating.paymentRequired);cov_29i6p5v5qf().s[82]++;expect(t.comments[0].rating.paperDeployment).to.equal(rating.paperDeployment);cov_29i6p5v5qf().s[83]++;expect(t.comments[0].rating.overallRating).to.equal(rating.overallRating);}else{cov_29i6p5v5qf().b[0][1]++;const t=(cov_29i6p5v5qf().s[84]++,toilets[0]);cov_29i6p5v5qf().s[85]++;expect(t).to.be.instanceOf(Object);cov_29i6p5v5qf().s[86]++;expect(t.place).to.equal(place2);cov_29i6p5v5qf().s[87]++;expect(t.publisher.id.toString()).to.equal(_id2);cov_29i6p5v5qf().s[88]++;expect(t.publisher.name).to.equal(name2);cov_29i6p5v5qf().s[89]++;expect(t.publisher.surname).to.equal(surname2);cov_29i6p5v5qf().s[90]++;expect(t.comments[0].id.toString()).to.equal(_commentId2);cov_29i6p5v5qf().s[91]++;expect(t.comments[0].rating).to.be.instanceOf(Object);cov_29i6p5v5qf().s[92]++;expect(t.comments[0].rating.cleanness).to.equal(rating2.cleanness);cov_29i6p5v5qf().s[93]++;expect(t.comments[0].rating.looks).to.equal(rating2.looks);cov_29i6p5v5qf().s[94]++;expect(t.comments[0].rating.multipleToilets).to.equal(rating2.multipleToilets);cov_29i6p5v5qf().s[95]++;expect(t.comments[0].rating.paymentRequired).to.equal(rating2.paymentRequired);cov_29i6p5v5qf().s[96]++;expect(t.comments[0].rating.paperDeployment).to.equal(rating2.paperDeployment);cov_29i6p5v5qf().s[97]++;expect(t.comments[0].rating.overallRating).to.equal(rating2.overallRating);}}).then(()=>{cov_29i6p5v5qf().f[15]++;});});});cov_29i6p5v5qf().s[98]++;describe('when there are no toilets',()=>{cov_29i6p5v5qf().f[16]++;cov_29i6p5v5qf().s[99]++;beforeEach(()=>{cov_29i6p5v5qf().f[17]++;cov_29i6p5v5qf().s[100]++;return Promise.resolve(Toilet.deleteMany()).then(()=>{cov_29i6p5v5qf().f[18]++;});});cov_29i6p5v5qf().s[101]++;it('should return an empty array if no toilets are available to display',()=>{cov_29i6p5v5qf().f[19]++;cov_29i6p5v5qf().s[102]++;return retrieveTopToilets().then(toilets=>{cov_29i6p5v5qf().f[20]++;cov_29i6p5v5qf().s[103]++;expect(toilets).to.be.instanceOf(Array);cov_29i6p5v5qf().s[104]++;expect(toilets.length).to.equal(0);});});});cov_29i6p5v5qf().s[105]++;after(()=>{cov_29i6p5v5qf().f[21]++;cov_29i6p5v5qf().s[106]++;return Promise.all([User.deleteMany(),Toilet.deleteMany(),Comment.deleteMany()]).then(()=>{cov_29i6p5v5qf().f[22]++;cov_29i6p5v5qf().s[107]++;return mongoose.disconnect();});});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXRvcC10b2lsZXRzLnNwZWMuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJwcm9jZXNzIiwiZXhwZWN0IiwicmFuZG9tIiwiZmxvb3IiLCJNYXRoIiwicmV0cmlldmVUb3BUb2lsZXRzIiwibW9uZ29vc2UiLCJtb2RlbHMiLCJVc2VyIiwiVG9pbGV0IiwiQ29tbWVudCIsImRlc2NyaWJlIiwiYmVmb3JlIiwiY29ubmVjdCIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsInRoZW4iLCJQcm9taXNlIiwiYWxsIiwiZGVsZXRlTWFueSIsIm5hbWUiLCJuYW1lMiIsInN1cm5hbWUiLCJzdXJuYW1lMiIsImVtYWlsIiwiZW1haWwyIiwicGFzc3dvcmQiLCJwYXNzd29yZDIiLCJhZ2UiLCJhZ2UyIiwiZ2VuZGVyIiwiZ2VuZGVyMiIsIl9pZCIsIl9pZDIiLCJwbGFjZTIiLCJfdG9pbGV0SWQiLCJfdG9pbGV0SWQyIiwiX2NvbW1lbnRJZCIsIl9jb21tZW50SWQyIiwicGxhY2UiLCJyYXRpbmciLCJyYXRpbmcyIiwiR0VOREVSUyIsIllFU09STk8iLCJiZWZvcmVFYWNoIiwibGVuZ3RoIiwiY2xlYW5uZXNzIiwibG9va3MiLCJtdWx0aXBsZVRvaWxldHMiLCJwYXltZW50UmVxdWlyZWQiLCJwYXBlckRlcGxveW1lbnQiLCJvdmVyYWxsUmF0aW5nIiwidGV4dEFyZWEiLCJjcmVhdGUiLCJ1c2VyIiwidXNlcjIiLCJpZCIsInRvU3RyaW5nIiwicHVibGlzaGVyIiwiZmluZEJ5SWQiLCJ0b2lsZXQiLCJ0b2lsZXQyIiwicHVibGlzaGVkVG9pbGV0cyIsInB1c2giLCJzYXZlIiwiY29tbWVudGVkQXQiLCJjb21tZW50IiwiY29tbWVudDIiLCJjb21tZW50cyIsIml0IiwidG9pbGV0cyIsInRvIiwiZXF1YWwiLCJiZSIsImluc3RhbmNlT2YiLCJBcnJheSIsInNjb3JlIiwi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TyxFQUFJLG9EQUNickUsTUFBTSxDQUFDcUUsT0FBRCxDQUFOLENBQWdCQyxFQUFoQixDQUFtQkUsRUFBbkIsQ0FBc0JDLFVBQXRCLENBQWlDQyxLQUFqQyxFQURhLDBCQUViMUUsTUFBTSxDQUFDcUUsT0FBTyxDQUFDekIsTUFBVCxDQUFOLENBQXVCMEIsRUFBdkIsQ0FBMEJDLEtBQTFCLENBQWdDLENBQWhDLEVBQ0gsQ0FKRSxDQUFQLENBS0gsQ0FQQyxDQUFGLENBUUgsQ0FYTyxDQUFSLENBOUhpQywwQkEySWpDUyxLQUFLLENBQUMsSUFDRiwwREFBQWhFLENBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLENBQUNWLElBQUksQ0FBQ1csVUFBTCxFQUFELENBQW9CVixNQUFNLENBQUNVLFVBQVAsRUFBcEIsQ0FBeUNULE9BQU8sQ0FBQ1MsVUFBUixFQUF6QyxDQUFaLEVBQ0tILElBREwsQ0FDVSxJQUFNLDBEQUFBVixDQUFBQSxRQUFRLENBQUM0RSxVQUFULEdBQXFCLENBRHJDLEVBQ3NDLENBRnJDLENBQUwsQ0FJSCxDQS9JTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnZG90ZW52JykuY29uZmlnKClcclxuXHJcbmNvbnN0IHsgZW52OiB7IFRFU1RfTU9OR09EQl9VUkwgfSB9ID0gcHJvY2Vzc1xyXG5jb25zdCB7IGV4cGVjdCB9ID0gcmVxdWlyZSgnY2hhaScpXHJcbmNvbnN0IHsgcmFuZG9tLCBmbG9vciB9ID0gTWF0aFxyXG5jb25zdCByZXRyaWV2ZVRvcFRvaWxldHMgPSByZXF1aXJlKCcuL3JldHJpZXZlLXRvcC10b2lsZXRzJylcclxuY29uc3QgeyBtb25nb29zZSwgbW9kZWxzOiB7IFVzZXIsIFRvaWxldCwgQ29tbWVudCB9IH0gPSByZXF1aXJlKCdwb29waW5pb24tZGF0YScpXHJcblxyXG5kZXNjcmliZSgncmV0cmlldmVUb3BUb2lsZXRzJywgKCkgPT4ge1xyXG4gICAgYmVmb3JlKCgpID0+XHJcbiAgICAgICAgbW9uZ29vc2UuY29ubmVjdChURVNUX01PTkdPREJfVVJMLCB7IHVzZU5ld1VybFBhcnNlcjogdHJ1ZSwgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlIH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IFByb21pc2UuYWxsKFtVc2VyLmRlbGV0ZU1hbnkoKSwgVG9pbGV0LmRlbGV0ZU1hbnkoKSwgQ29tbWVudC5kZWxldGVNYW55KCldKSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4geyB9KVxyXG4gICAgKVxyXG5cclxuICAgIGxldCBuYW1lLCBuYW1lMiwgc3VybmFtZSwgc3VybmFtZTIsIGVtYWlsLCBlbWFpbDIsIHBhc3N3b3JkLCBwYXNzd29yZDIsIGFnZSwgYWdlMiwgZ2VuZGVyLCBnZW5kZXIyLCBfaWQsIF9pZDIsIHBsYWNlMiwgX3RvaWxldElkLCBfdG9pbGV0SWQyLCBfY29tbWVudElkLCBfY29tbWVudElkMiwgcGxhY2UsIHJhdGluZyA9IHt9LCByYXRpbmcyID0ge31cclxuICAgIGNvbnN0IEdFTkRFUlMgPSBbJ21hbGUnLCAnZmVtYWxlJywgJ25vbi1iaW5hcnknXVxyXG4gICAgY29uc3QgWUVTT1JOTyA9IFt0cnVlLCBmYWxzZV1cclxuXHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICBuYW1lID0gYG5hbWUtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgc3VybmFtZSA9IGBzdXJuYW1lLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGVtYWlsID0gYGVtYWlsLSR7cmFuZG9tKCl9QG1haWwuY29tYFxyXG4gICAgICAgIHBhc3N3b3JkID0gYHBhc3N3b3JkLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGFnZSA9IGZsb29yKHJhbmRvbSgpICogMTIwKVxyXG4gICAgICAgIGdlbmRlcjIgPSBHRU5ERVJTW2Zsb29yKHJhbmRvbSgpICogR0VOREVSUy5sZW5ndGgpXVxyXG4gICAgICAgIG5hbWUyID0gYG5hbWUyLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIHN1cm5hbWUyID0gYHN1cm5hbWUyLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGVtYWlsMiA9IGBlbWFpbDItJHtyYW5kb20oKX1AbWFpbC5jb21gXHJcbiAgICAgICAgcGFzc3dvcmQyID0gYHBhc3N3b3JkMi0ke3JhbmRvbSgpfWBcclxuICAgICAgICBhZ2UgPSBmbG9vcihyYW5kb20oKSAqIDEyMClcclxuICAgICAgICBhZ2UyID0gZmxvb3IocmFuZG9tKCkgKiAxMjApXHJcbiAgICAgICAgZ2VuZGVyID0gR0VOREVSU1tmbG9vcihyYW5kb20oKSAqIEdFTkRFUlMubGVuZ3RoKV1cclxuICAgICAgICBnZW5kZXIyID0gR0VOREVSU1tmbG9vcihyYW5kb20oKSAqIEdFTkRFUlMubGVuZ3RoKV1cclxuICAgICAgICBwbGFjZSA9IGBob3VzZSBvZiAke25hbWV9YFxyXG4gICAgICAgIHBsYWNlMiA9IGBob3VzZSBvZiAke25hbWUyfWBcclxuXHJcbiAgICAgICAgcmF0aW5nLmNsZWFubmVzcyA9IGZsb29yKHJhbmRvbSgpICogNSlcclxuICAgICAgICByYXRpbmcubG9va3MgPSBmbG9vcihyYW5kb20oKSAqIDUpXHJcbiAgICAgICAgcmF0aW5nLm11bHRpcGxlVG9pbGV0cyA9IFlFU09STk9bZmxvb3IocmFuZG9tKCkgKiBZRVNPUk5PLmxlbmd0aCldXHJcbiAgICAgICAgcmF0aW5nLnBheW1lbnRSZXF1aXJlZCA9IFlFU09STk9bZmxvb3IocmFuZG9tKCkgKiBZRVNPUk5PLmxlbmd0aCldXHJcbiAgICAgICAgcmF0aW5nLnBhcGVyRGVwbG95bWVudCA9IFlFU09STk9bZmxvb3IocmFuZG9tKCkgKiBZRVNPUk5PLmxlbmd0aCldXHJcbiAgICAgICAgcmF0aW5nLm92ZXJhbGxSYXRpbmcgPSBmbG9vcihyYW5kb20oKSAqIDUpXHJcbiAgICAgICAgcmF0aW5nLnRleHRBcmVhID0gYG9waW5pb24tJHtyYW5kb20oKX1gXHJcblxyXG4gICAgICAgIHJhdGluZzIuY2xlYW5uZXNzID0gZmxvb3IocmFuZG9tKCkgKiA1KVxyXG4gICAgICAgIHJhdGluZzIubG9va3MgPSBmbG9vcihyYW5kb20oKSAqIDUpXHJcbiAgICAgICAgcmF0aW5nMi5tdWx0aXBsZVRvaWxldHMgPSBZRVNPUk5PW2Zsb29yKHJhbmRvbSgpICogWUVTT1JOTy5sZW5ndGgpXVxyXG4gICAgICAgIHJhdGluZzIucGF5bWVudFJlcXVpcmVkID0gWUVTT1JOT1tmbG9vcihyYW5kb20oKSAqIFlFU09STk8ubGVuZ3RoKV1cclxuICAgICAgICByYXRpbmcyLnBhcGVyRGVwbG95bWVudCA9IFlFU09STk9bZmxvb3IocmFuZG9tKCkgKiBZRVNPUk5PLmxlbmd0aCldXHJcbiAgICAgICAgcmF0aW5nMi5vdmVyYWxsUmF0aW5nID0gZmxvb3IocmFuZG9tKCkgKiA1KVxyXG4gICAgICAgIHJhdGluZzIudGV4dEFyZWEgPSBgb3BpbmlvbjItJHtyYW5kb20oKX1gXHJcbiAgICB9KVxyXG5cclxuICAgIGRlc2NyaWJlKCd3aGVuIHVzZXIgYW5kIHRoZSB0b2lsZXQgcG9zdCBleGlzdCcsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+XHJcbiAgICAgICAgICAgIFByb21pc2UuYWxsKFtVc2VyLmNyZWF0ZSh7IG5hbWUsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgYWdlLCBnZW5kZXIgfSksIFVzZXIuY3JlYXRlKHsgbmFtZTogbmFtZTIsIHN1cm5hbWU6IHN1cm5hbWUyLCBlbWFpbDogZW1haWwyLCBwYXNzd29yZDogcGFzc3dvcmQyLCBhZ2U6IGFnZTIsIGdlbmRlcjogZ2VuZGVyMiB9KV0pXHJcbiAgICAgICAgICAgICAgICAudGhlbigoW3VzZXIsIHVzZXIyXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIF9pZCA9IHVzZXIuaWQudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICAgICAgICAgIF9pZDIgPSB1c2VyMi5pZC50b1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gUHJvbWlzZS5hbGwoW1RvaWxldC5jcmVhdGUoeyBwdWJsaXNoZXI6IF9pZCwgcGxhY2UgfSksIFRvaWxldC5jcmVhdGUoeyBwdWJsaXNoZXI6IF9pZDIsIHBsYWNlOiBwbGFjZTIgfSksIFVzZXIuZmluZEJ5SWQoX2lkKSwgVXNlci5maW5kQnlJZChfaWQyKV0pKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKFt0b2lsZXQsIHRvaWxldDIsIHVzZXIsIHVzZXIyXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIF90b2lsZXRJZCA9IHRvaWxldC5pZC50b1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICAgICAgX3RvaWxldElkMiA9IHRvaWxldDIuaWQudG9TdHJpbmcoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB1c2VyLnB1Ymxpc2hlZFRvaWxldHMucHVzaCh0b2lsZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcjIucHVibGlzaGVkVG9pbGV0cy5wdXNoKHRvaWxldDIpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbdXNlci5zYXZlKCksIHVzZXIyLnNhdmUoKV0pXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gUHJvbWlzZS5hbGwoW0NvbW1lbnQuY3JlYXRlKHsgcHVibGlzaGVyOiBfaWQsIGNvbW1lbnRlZEF0OiBfdG9pbGV0SWQsIHJhdGluZyB9KSwgQ29tbWVudC5jcmVhdGUoeyBwdWJsaXNoZXI6IF9pZDIsIGNvbW1lbnRlZEF0OiBfdG9pbGV0SWQyLCByYXRpbmc6IHJhdGluZzIgfSksIFRvaWxldC5maW5kQnlJZChfdG9pbGV0SWQpLCBUb2lsZXQuZmluZEJ5SWQoX3RvaWxldElkMiksIFVzZXIuZmluZEJ5SWQoX2lkKSwgVXNlci5maW5kQnlJZChfaWQyKV0pKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKFtjb21tZW50LCBjb21tZW50MiwgdG9pbGV0LCB0b2lsZXQyLCB1c2VyLCB1c2VyMl0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBfY29tbWVudElkID0gY29tbWVudC5pZC50b1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICAgICAgX2NvbW1lbnRJZDIgPSBjb21tZW50Mi5pZC50b1N0cmluZygpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRvaWxldC5jb21tZW50cy5wdXNoKGNvbW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgdG9pbGV0Mi5jb21tZW50cy5wdXNoKGNvbW1lbnQyKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB1c2VyLmNvbW1lbnRzLnB1c2goY29tbWVudClcclxuICAgICAgICAgICAgICAgICAgICB1c2VyMi5jb21tZW50cy5wdXNoKGNvbW1lbnQyKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RvaWxldC5zYXZlKCksIHRvaWxldDIuc2F2ZSgpLCB1c2VyLnNhdmUoKSwgdXNlcjIuc2F2ZSgpXSlcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7IH0pXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIHN1Y2Nlc3NmdWxseSByZXRyaWV2ZSBhbGwgdG9pbGV0cyBhbmQgc29ydCB0aGVtIGJ5IHJhdGluZycsICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHJldHJpZXZlVG9wVG9pbGV0cygpXHJcbiAgICAgICAgICAgICAgICAudGhlbih0b2lsZXRzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QodG9pbGV0cy5sZW5ndGgpLnRvLmVxdWFsKDIpXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHRvaWxldHMpLnRvLmJlLmluc3RhbmNlT2YoQXJyYXkpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdCh0b2lsZXRzWzBdLnNjb3JlID4gdG9pbGV0c1sxXS5zY29yZSkudG8uYmUudHJ1ZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodG9pbGV0c1swXS5jb21tZW50c1swXS5yYXRpbmcudGV4dEFyZWEgPT09IHJhdGluZy50ZXh0QXJlYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdG9pbGV0c1swXVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHQpLnRvLmJlLmluc3RhbmNlT2YoT2JqZWN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QodC5wbGFjZSkudG8uZXF1YWwocGxhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdCh0LnB1Ymxpc2hlci5pZC50b1N0cmluZygpKS50by5lcXVhbChfaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdCh0LnB1Ymxpc2hlci5uYW1lKS50by5lcXVhbChuYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QodC5wdWJsaXNoZXIuc3VybmFtZSkudG8uZXF1YWwoc3VybmFtZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHQuY29tbWVudHNbMF0uaWQudG9TdHJpbmcoKSkudG8uZXF1YWwoX2NvbW1lbnRJZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHQuY29tbWVudHNbMF0ucmF0aW5nKS50by5iZS5pbnN0YW5jZU9mKE9iamVjdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHQuY29tbWVudHNbMF0ucmF0aW5nLmNsZWFubmVzcykudG8uZXF1YWwocmF0aW5nLmNsZWFubmVzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHQuY29tbWVudHNbMF0ucmF0aW5nLmxvb2tzKS50by5lcXVhbChyYXRpbmcubG9va3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdCh0LmNvbW1lbnRzWzBdLnJhdGluZy5tdWx0aXBsZVRvaWxldHMpLnRvLmVxdWFsKHJhdGluZy5tdWx0aXBsZVRvaWxldHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdCh0LmNvbW1lbnRzWzBdLnJhdGluZy5wYXltZW50UmVxdWlyZWQpLnRvLmVxdWFsKHJhdGluZy5wYXltZW50UmVxdWlyZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdCh0LmNvbW1lbnRzWzBdLnJhdGluZy5wYXBlckRlcGxveW1lbnQpLnRvLmVxdWFsKHJhdGluZy5wYXBlckRlcGxveW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdCh0LmNvbW1lbnRzWzBdLnJhdGluZy5vdmVyYWxsUmF0aW5nKS50by5lcXVhbChyYXRpbmcub3ZlcmFsbFJhdGluZylcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdG9pbGV0c1swXVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHQpLnRvLmJlLmluc3RhbmNlT2YoT2JqZWN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QodC5wbGFjZSkudG8uZXF1YWwocGxhY2UyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QodC5wdWJsaXNoZXIuaWQudG9TdHJpbmcoKSkudG8uZXF1YWwoX2lkMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHQucHVibGlzaGVyLm5hbWUpLnRvLmVxdWFsKG5hbWUyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QodC5wdWJsaXNoZXIuc3VybmFtZSkudG8uZXF1YWwoc3VybmFtZTIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdCh0LmNvbW1lbnRzWzBdLmlkLnRvU3RyaW5nKCkpLnRvLmVxdWFsKF9jb21tZW50SWQyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QodC5jb21tZW50c1swXS5yYXRpbmcpLnRvLmJlLmluc3RhbmNlT2YoT2JqZWN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QodC5jb21tZW50c1swXS5yYXRpbmcuY2xlYW5uZXNzKS50by5lcXVhbChyYXRpbmcyLmNsZWFubmVzcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHQuY29tbWVudHNbMF0ucmF0aW5nLmxvb2tzKS50by5lcXVhbChyYXRpbmcyLmxvb2tzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QodC5jb21tZW50c1swXS5yYXRpbmcubXVsdGlwbGVUb2lsZXRzKS50by5lcXVhbChyYXRpbmcyLm11bHRpcGxlVG9pbGV0cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHQuY29tbWVudHNbMF0ucmF0aW5nLnBheW1lbnRSZXF1aXJlZCkudG8uZXF1YWwocmF0aW5nMi5wYXltZW50UmVxdWlyZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdCh0LmNvbW1lbnRzWzBdLnJhdGluZy5wYXBlckRlcGxveW1lbnQpLnRvLmVxdWFsKHJhdGluZzIucGFwZXJEZXBsb3ltZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QodC5jb21tZW50c1swXS5yYXRpbmcub3ZlcmFsbFJhdGluZykudG8uZXF1YWwocmF0aW5nMi5vdmVyYWxsUmF0aW5nKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7IH0pXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9KVxyXG5cclxuICAgIGRlc2NyaWJlKCd3aGVuIHRoZXJlIGFyZSBubyB0b2lsZXRzJywgKCkgPT4ge1xyXG4gICAgICAgIGJlZm9yZUVhY2goKCkgPT4gUHJvbWlzZS5yZXNvbHZlKFRvaWxldC5kZWxldGVNYW55KCkpLnRoZW4oKCkgPT4geyB9KSlcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYW4gZW1wdHkgYXJyYXkgaWYgbm8gdG9pbGV0cyBhcmUgYXZhaWxhYmxlIHRvIGRpc3BsYXknLCAoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmV0cmlldmVUb3BUb2lsZXRzKClcclxuICAgICAgICAgICAgICAgIC50aGVuKHRvaWxldHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdCh0b2lsZXRzKS50by5iZS5pbnN0YW5jZU9mKEFycmF5KVxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdCh0b2lsZXRzLmxlbmd0aCkudG8uZXF1YWwoMClcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgYWZ0ZXIoKCkgPT5cclxuICAgICAgICBQcm9taXNlLmFsbChbVXNlci5kZWxldGVNYW55KCksIFRvaWxldC5kZWxldGVNYW55KCksIENvbW1lbnQuZGVsZXRlTWFueSgpXSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gbW9uZ29vc2UuZGlzY29ubmVjdCgpKVxyXG4gICAgKVxyXG59KSJdfQ==