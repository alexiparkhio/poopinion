function cov_26ax9zkmac(){var path="C:\\Users\\Alex\\bootcamp\\collab\\skylab-bootcamp-202001\\staff\\alex-park\\poopinion\\poopinion-api\\logic\\update-toilet.js";var hash="7cb7c59fdb00dc118cccf329ef8e21395292d4f3";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Alex\\bootcamp\\collab\\skylab-bootcamp-202001\\staff\\alex-park\\poopinion\\poopinion-api\\logic\\update-toilet.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:47}},"1":{start:{line:2,column:37},end:{line:2,column:62}},"2":{start:{line:3,column:43},end:{line:3,column:70}},"3":{start:{line:18,column:0},end:{line:32,column:1}},"4":{start:{line:19,column:4},end:{line:19,column:29}},"5":{start:{line:20,column:4},end:{line:20,column:42}},"6":{start:{line:21,column:4},end:{line:21,column:39}},"7":{start:{line:23,column:4},end:{line:31,column:24}},"8":{start:{line:25,column:12},end:{line:25,column:83}},"9":{start:{line:25,column:23},end:{line:25,column:83}},"10":{start:{line:26,column:12},end:{line:26,column:96}},"11":{start:{line:26,column:34},end:{line:26,column:96}},"12":{start:{line:27,column:12},end:{line:27,column:93}},"13":{start:{line:27,column:25},end:{line:27,column:93}},"14":{start:{line:29,column:12},end:{line:29,column:69}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:18,column:17},end:{line:18,column:18}},loc:{start:{line:18,column:41},end:{line:32,column:1}},line:18},"1":{name:"(anonymous_1)",decl:{start:{line:24,column:14},end:{line:24,column:15}},loc:{start:{line:24,column:34},end:{line:30,column:9}},line:24},"2":{name:"(anonymous_2)",decl:{start:{line:31,column:14},end:{line:31,column:15}},loc:{start:{line:31,column:20},end:{line:31,column:23}},line:31}},branchMap:{"0":{loc:{start:{line:25,column:12},end:{line:25,column:83}},type:"if",locations:[{start:{line:25,column:12},end:{line:25,column:83}},{start:{line:25,column:12},end:{line:25,column:83}}],line:25},"1":{loc:{start:{line:26,column:12},end:{line:26,column:96}},type:"if",locations:[{start:{line:26,column:12},end:{line:26,column:96}},{start:{line:26,column:12},end:{line:26,column:96}}],line:26},"2":{loc:{start:{line:27,column:12},end:{line:27,column:93}},type:"if",locations:[{start:{line:27,column:12},end:{line:27,column:93}},{start:{line:27,column:12},end:{line:27,column:93}}],line:27}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7cb7c59fdb00dc118cccf329ef8e21395292d4f3"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_26ax9zkmac=function(){return actualCoverage;};return actualCoverage;}cov_26ax9zkmac();const{validate}=(cov_26ax9zkmac().s[0]++,require('poopinion-utils'));const{models:{User,Toilet}}=(cov_26ax9zkmac().s[1]++,require('poopinion-data'));const{NotAllowedError,NotFoundError}=(cov_26ax9zkmac().s[2]++,require('poopinion-errors'));/**
 * Updates the comment post info
 * 
 * @param {string} id user's unique ID
 * @param {string} toiletId toilet's unique id
 * @param {object} data the elements that will be updated
 * 
 * @returns {Promise<string>} an empty Promise on a successful update
 * 
 * @throws {NotAllowedError} if a user is deactivated
 * @throws {NotFoundError} if the user or the toilet do not exist
 */cov_26ax9zkmac().s[3]++;module.exports=(id,toiletId,data)=>{cov_26ax9zkmac().f[0]++;cov_26ax9zkmac().s[4]++;validate.string(id,'id');cov_26ax9zkmac().s[5]++;validate.string(toiletId,'toilet ID');cov_26ax9zkmac().s[6]++;validate.type(data,'data',Object);cov_26ax9zkmac().s[7]++;return Promise.all([User.findById(id),Toilet.findById(toiletId)]).then(([user,toilet])=>{cov_26ax9zkmac().f[1]++;cov_26ax9zkmac().s[8]++;if(!user){cov_26ax9zkmac().b[0][0]++;cov_26ax9zkmac().s[9]++;throw new NotFoundError(`user with id ${id} does not exist`);}else{cov_26ax9zkmac().b[0][1]++;}cov_26ax9zkmac().s[10]++;if(user.deactivated){cov_26ax9zkmac().b[1][0]++;cov_26ax9zkmac().s[11]++;throw new NotAllowedError(`user with id ${id} is deactivated`);}else{cov_26ax9zkmac().b[1][1]++;}cov_26ax9zkmac().s[12]++;if(!toilet){cov_26ax9zkmac().b[2][0]++;cov_26ax9zkmac().s[13]++;throw new NotFoundError(`toilet with id ${toiletId} does not exist`);}else{cov_26ax9zkmac().b[2][1]++;}cov_26ax9zkmac().s[14]++;return Toilet.findByIdAndUpdate(toiletId,{$set:data});}).then(()=>{cov_26ax9zkmac().f[2]++;});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwZGF0ZS10b2lsZXQuanMiXSwibmFtZXMiOlsidmFsaWRhdGUiLCJyZXF1aXJlIiwibW9kZWxzIiwiVXNlciIsIlRvaWxldCIsIk5vdEFsbG93ZWRFcnJvciIsIk5vdEZvdW5kRXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIiwiaWQiLCJ0b2lsZXRJZCIsImRhdGEiLCJzdHJpbmciLCJ0eXBlIiwiT2JqZWN0IiwiUHJvbWlzZSIsImFsbCIsImZpbmRCeUlkIiwidGhlbiIsInVzZXIiLCJ0b2lsZXQiLCJkZWFjdGl2YXRlZCIsImZpbmRCeUlkQW5kVXBkYXRlIiwiJHNldCJdLCJtYXBwaW5ncyI6InF4RkFBQSxLQUFNLENBQUVBLFFBQUYsMkJBQWVDLE9BQU8sQ0FBQyxpQkFBRCxDQUF0QixDQUFOLENBQ0EsS0FBTSxDQUFFQyxNQUFNLENBQUUsQ0FBRUMsSUFBRixDQUFRQyxNQUFSLENBQVYsMkJBQStCSCxPQUFPLENBQUMsZ0JBQUQsQ0FBdEMsQ0FBTixDQUNBLEtBQU0sQ0FBRUksZUFBRixDQUFtQkMsYUFBbkIsMkJBQXFDTCxPQUFPLENBQUMsa0JBQUQsQ0FBNUMsQ0FBTixDQUVBOzs7Ozs7Ozs7OzsyQkFhQU0sTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQUNDLEVBQUQsQ0FBS0MsUUFBTCxDQUFlQyxJQUFmLEdBQXdCLGlEQUNyQ1gsUUFBUSxDQUFDWSxNQUFULENBQWdCSCxFQUFoQixDQUFvQixJQUFwQixFQURxQyx3QkFFckNULFFBQVEsQ0FBQ1ksTUFBVCxDQUFnQkYsUUFBaEIsQ0FBMEIsV0FBMUIsRUFGcUMsd0JBR3JDVixRQUFRLENBQUNhLElBQVQsQ0FBY0YsSUFBZCxDQUFvQixNQUFwQixDQUE0QkcsTUFBNUIsRUFIcUMsd0JBS3JDLE1BQU9DLENBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLENBQUNiLElBQUksQ0FBQ2MsUUFBTCxDQUFjUixFQUFkLENBQUQsQ0FBb0JMLE1BQU0sQ0FBQ2EsUUFBUCxDQUFnQlAsUUFBaEIsQ0FBcEIsQ0FBWixFQUNGUSxJQURFLENBQ0csQ0FBQyxDQUFDQyxJQUFELENBQU9DLE1BQVAsQ0FBRCxHQUFvQixpREFDdEIsR0FBSSxDQUFDRCxJQUFMLENBQVcseURBQU0sSUFBSWIsQ0FBQUEsYUFBSixDQUFtQixnQkFBZUcsRUFBRyxpQkFBckMsQ0FBTixDQUE0RCxDQUF2RSxpQ0FEc0IseUJBRXRCLEdBQUlVLElBQUksQ0FBQ0UsV0FBVCxDQUFzQiwwREFBTSxJQUFJaEIsQ0FBQUEsZUFBSixDQUFxQixnQkFBZUksRUFBRyxpQkFBdkMsQ0FBTixDQUE4RCxDQUFwRixpQ0FGc0IseUJBR3RCLEdBQUksQ0FBQ1csTUFBTCxDQUFhLDBEQUFNLElBQUlkLENBQUFBLGFBQUosQ0FBbUIsa0JBQWlCSSxRQUFTLGlCQUE3QyxDQUFOLENBQW9FLENBQWpGLGlDQUhzQix5QkFLdEIsTUFBT04sQ0FBQUEsTUFBTSxDQUFDa0IsaUJBQVAsQ0FBeUJaLFFBQXpCLENBQW1DLENBQUVhLElBQUksQ0FBRVosSUFBUixDQUFuQyxDQUFQLENBQ0gsQ0FQRSxFQVFGTyxJQVJFLENBUUcsSUFBTSx5QkFBRyxDQVJaLENBQVAsQ0FTSCxDQWREIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyB2YWxpZGF0ZSB9ID0gcmVxdWlyZSgncG9vcGluaW9uLXV0aWxzJylcclxuY29uc3QgeyBtb2RlbHM6IHsgVXNlciwgVG9pbGV0IH0gfSA9IHJlcXVpcmUoJ3Bvb3Bpbmlvbi1kYXRhJylcclxuY29uc3QgeyBOb3RBbGxvd2VkRXJyb3IsIE5vdEZvdW5kRXJyb3IgfSA9IHJlcXVpcmUoJ3Bvb3Bpbmlvbi1lcnJvcnMnKVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZXMgdGhlIGNvbW1lbnQgcG9zdCBpbmZvXHJcbiAqIFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgdXNlcidzIHVuaXF1ZSBJRFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9pbGV0SWQgdG9pbGV0J3MgdW5pcXVlIGlkXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhIHRoZSBlbGVtZW50cyB0aGF0IHdpbGwgYmUgdXBkYXRlZFxyXG4gKiBcclxuICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gYW4gZW1wdHkgUHJvbWlzZSBvbiBhIHN1Y2Nlc3NmdWwgdXBkYXRlXHJcbiAqIFxyXG4gKiBAdGhyb3dzIHtOb3RBbGxvd2VkRXJyb3J9IGlmIGEgdXNlciBpcyBkZWFjdGl2YXRlZFxyXG4gKiBAdGhyb3dzIHtOb3RGb3VuZEVycm9yfSBpZiB0aGUgdXNlciBvciB0aGUgdG9pbGV0IGRvIG5vdCBleGlzdFxyXG4gKi9cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gKGlkLCB0b2lsZXRJZCwgZGF0YSkgPT4ge1xyXG4gICAgdmFsaWRhdGUuc3RyaW5nKGlkLCAnaWQnKVxyXG4gICAgdmFsaWRhdGUuc3RyaW5nKHRvaWxldElkLCAndG9pbGV0IElEJylcclxuICAgIHZhbGlkYXRlLnR5cGUoZGF0YSwgJ2RhdGEnLCBPYmplY3QpXHJcblxyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFtVc2VyLmZpbmRCeUlkKGlkKSwgVG9pbGV0LmZpbmRCeUlkKHRvaWxldElkKV0pXHJcbiAgICAgICAgLnRoZW4oKFt1c2VyLCB0b2lsZXRdKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdXNlcikgdGhyb3cgbmV3IE5vdEZvdW5kRXJyb3IoYHVzZXIgd2l0aCBpZCAke2lkfSBkb2VzIG5vdCBleGlzdGApXHJcbiAgICAgICAgICAgIGlmICh1c2VyLmRlYWN0aXZhdGVkKSB0aHJvdyBuZXcgTm90QWxsb3dlZEVycm9yKGB1c2VyIHdpdGggaWQgJHtpZH0gaXMgZGVhY3RpdmF0ZWRgKVxyXG4gICAgICAgICAgICBpZiAoIXRvaWxldCkgdGhyb3cgbmV3IE5vdEZvdW5kRXJyb3IoYHRvaWxldCB3aXRoIGlkICR7dG9pbGV0SWR9IGRvZXMgbm90IGV4aXN0YClcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBUb2lsZXQuZmluZEJ5SWRBbmRVcGRhdGUodG9pbGV0SWQsIHsgJHNldDogZGF0YSB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKCkgPT4geyB9KVxyXG59Il19