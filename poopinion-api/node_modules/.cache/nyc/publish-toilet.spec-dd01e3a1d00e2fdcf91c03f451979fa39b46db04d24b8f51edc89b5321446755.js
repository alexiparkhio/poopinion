function cov_1fngmnipgh(){var path="C:\\Users\\Alex\\bootcamp\\collab\\skylab-bootcamp-202001\\staff\\alex-park\\poopinion\\poopinion-api\\logic\\publish-toilet.spec.js";var hash="b67b6ac9b81aa0d5f4c5b3c8c9cb85b93de7ca6a";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Alex\\bootcamp\\collab\\skylab-bootcamp-202001\\staff\\alex-park\\poopinion\\poopinion-api\\logic\\publish-toilet.spec.js",statementMap:{"0":{start:{line:1,column:0},end:{line:1,column:26}},"1":{start:{line:3,column:38},end:{line:3,column:45}},"2":{start:{line:4,column:19},end:{line:4,column:34}},"3":{start:{line:5,column:26},end:{line:5,column:30}},"4":{start:{line:6,column:22},end:{line:6,column:49}},"5":{start:{line:7,column:56},end:{line:7,column:81}},"6":{start:{line:9,column:0},end:{line:160,column:2}},"7":{start:{line:10,column:4},end:{line:14,column:5}},"8":{start:{line:11,column:8},end:{line:13,column:28}},"9":{start:{line:12,column:24},end:{line:12,column:99}},"10":{start:{line:17,column:20},end:{line:17,column:52}},"11":{start:{line:19,column:4},end:{line:32,column:6}},"12":{start:{line:20,column:8},end:{line:20,column:33}},"13":{start:{line:21,column:8},end:{line:21,column:39}},"14":{start:{line:22,column:8},end:{line:22,column:44}},"15":{start:{line:23,column:8},end:{line:23,column:41}},"16":{start:{line:24,column:8},end:{line:24,column:35}},"17":{start:{line:25,column:8},end:{line:25,column:58}},"18":{start:{line:26,column:8},end:{line:26,column:34}},"19":{start:{line:27,column:8},end:{line:27,column:27}},"20":{start:{line:28,column:8},end:{line:28,column:32}},"21":{start:{line:29,column:8},end:{line:29,column:28}},"22":{start:{line:30,column:8},end:{line:30,column:33}},"23":{start:{line:31,column:8},end:{line:31,column:76}},"24":{start:{line:34,column:4},end:{line:72,column:6}},"25":{start:{line:36,column:8},end:{line:40,column:9}},"26":{start:{line:37,column:12},end:{line:39,column:32}},"27":{start:{line:38,column:34},end:{line:38,column:42}},"28":{start:{line:42,column:8},end:{line:71,column:9}},"29":{start:{line:43,column:12},end:{line:70,column:32}},"30":{start:{line:44,column:28},end:{line:44,column:62}},"31":{start:{line:47,column:20},end:{line:47,column:69}},"32":{start:{line:48,column:20},end:{line:48,column:56}},"33":{start:{line:49,column:20},end:{line:49,column:75}},"34":{start:{line:50,column:20},end:{line:50,column:79}},"35":{start:{line:51,column:20},end:{line:51,column:74}},"36":{start:{line:52,column:20},end:{line:52,column:76}},"37":{start:{line:53,column:20},end:{line:53,column:84}},"38":{start:{line:54,column:20},end:{line:54,column:86}},"39":{start:{line:57,column:28},end:{line:57,column:75}},"40":{start:{line:59,column:20},end:{line:59,column:81}},"41":{start:{line:60,column:20},end:{line:60,column:72}},"42":{start:{line:61,column:20},end:{line:61,column:87}},"43":{start:{line:62,column:20},end:{line:62,column:74}},"44":{start:{line:63,column:20},end:{line:63,column:93}},"45":{start:{line:64,column:20},end:{line:64,column:97}},"46":{start:{line:65,column:20},end:{line:65,column:92}},"47":{start:{line:66,column:20},end:{line:66,column:94}},"48":{start:{line:67,column:20},end:{line:67,column:102}},"49":{start:{line:68,column:20},end:{line:68,column:104}},"50":{start:{line:74,column:4},end:{line:86,column:6}},"51":{start:{line:75,column:8},end:{line:75,column:59}},"52":{start:{line:75,column:25},end:{line:75,column:58}},"53":{start:{line:77,column:8},end:{line:85,column:9}},"54":{start:{line:78,column:12},end:{line:84,column:32}},"55":{start:{line:79,column:30},end:{line:79,column:76}},"56":{start:{line:81,column:20},end:{line:81,column:55}},"57":{start:{line:82,column:20},end:{line:82,column:82}},"58":{start:{line:88,column:4},end:{line:103,column:6}},"59":{start:{line:89,column:8},end:{line:94,column:9}},"60":{start:{line:90,column:12},end:{line:93,column:32}},"61":{start:{line:91,column:34},end:{line:91,column:42}},"62":{start:{line:92,column:28},end:{line:92,column:88}},"63":{start:{line:95,column:8},end:{line:102,column:9}},"64":{start:{line:96,column:12},end:{line:101,column:18}},"65":{start:{line:97,column:30},end:{line:97,column:76}},"66":{start:{line:99,column:20},end:{line:99,column:55}},"67":{start:{line:100,column:20},end:{line:100,column:82}},"68":{start:{line:105,column:4},end:{line:154,column:6}},"69":{start:{line:106,column:8},end:{line:110,column:9}},"70":{start:{line:107,column:12},end:{line:109,column:32}},"71":{start:{line:108,column:34},end:{line:108,column:42}},"72":{start:{line:112,column:8},end:{line:124,column:10}},"73":{start:{line:113,column:12},end:{line:113,column:30}},"74":{start:{line:114,column:12},end:{line:114,column:118}},"75":{start:{line:114,column:25},end:{line:114,column:63}},"76":{start:{line:116,column:12},end:{line:116,column:25}},"77":{start:{line:117,column:12},end:{line:117,column:118}},"78":{start:{line:117,column:25},end:{line:117,column:63}},"79":{start:{line:119,column:12},end:{line:119,column:29}},"80":{start:{line:120,column:12},end:{line:120,column:118}},"81":{start:{line:120,column:25},end:{line:120,column:63}},"82":{start:{line:122,column:12},end:{line:122,column:22}},"83":{start:{line:123,column:12},end:{line:123,column:118}},"84":{start:{line:123,column:25},end:{line:123,column:63}},"85":{start:{line:126,column:8},end:{line:138,column:10}},"86":{start:{line:127,column:12},end:{line:127,column:28}},"87":{start:{line:128,column:12},end:{line:128,column:93}},"88":{start:{line:128,column:25},end:{line:128,column:43}},"89":{start:{line:130,column:12},end:{line:130,column:23}},"90":{start:{line:131,column:12},end:{line:131,column:93}},"91":{start:{line:131,column:25},end:{line:131,column:43}},"92":{start:{line:133,column:12},end:{line:133,column:27}},"93":{start:{line:134,column:12},end:{line:134,column:93}},"94":{start:{line:134,column:25},end:{line:134,column:43}},"95":{start:{line:136,column:12},end:{line:136,column:20}},"96":{start:{line:137,column:12},end:{line:137,column:93}},"97":{start:{line:137,column:25},end:{line:137,column:43}},"98":{start:{line:140,column:8},end:{line:153,column:10}},"99":{start:{line:141,column:12},end:{line:141,column:31}},"100":{start:{line:142,column:12},end:{line:142,column:36}},"101":{start:{line:143,column:12},end:{line:143,column:130}},"102":{start:{line:143,column:25},end:{line:143,column:63}},"103":{start:{line:145,column:12},end:{line:145,column:31}},"104":{start:{line:146,column:12},end:{line:146,column:130}},"105":{start:{line:146,column:25},end:{line:146,column:63}},"106":{start:{line:148,column:12},end:{line:148,column:35}},"107":{start:{line:149,column:12},end:{line:149,column:130}},"108":{start:{line:149,column:25},end:{line:149,column:63}},"109":{start:{line:151,column:12},end:{line:151,column:33}},"110":{start:{line:152,column:12},end:{line:152,column:130}},"111":{start:{line:152,column:25},end:{line:152,column:63}},"112":{start:{line:156,column:4},end:{line:159,column:5}},"113":{start:{line:157,column:8},end:{line:158,column:46}},"114":{start:{line:158,column:24},end:{line:158,column:45}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:26},end:{line:9,column:27}},loc:{start:{line:9,column:32},end:{line:160,column:1}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:10,column:11},end:{line:10,column:12}},loc:{start:{line:11,column:8},end:{line:13,column:28}},line:11},"2":{name:"(anonymous_2)",decl:{start:{line:12,column:18},end:{line:12,column:19}},loc:{start:{line:12,column:24},end:{line:12,column:99}},line:12},"3":{name:"(anonymous_3)",decl:{start:{line:13,column:18},end:{line:13,column:19}},loc:{start:{line:13,column:24},end:{line:13,column:27}},line:13},"4":{name:"(anonymous_4)",decl:{start:{line:19,column:15},end:{line:19,column:16}},loc:{start:{line:19,column:21},end:{line:32,column:5}},line:19},"5":{name:"(anonymous_5)",decl:{start:{line:34,column:41},end:{line:34,column:42}},loc:{start:{line:34,column:47},end:{line:72,column:5}},line:34},"6":{name:"(anonymous_6)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:37,column:12},end:{line:39,column:32}},line:37},"7":{name:"(anonymous_7)",decl:{start:{line:38,column:22},end:{line:38,column:23}},loc:{start:{line:38,column:34},end:{line:38,column:42}},line:38},"8":{name:"(anonymous_8)",decl:{start:{line:39,column:22},end:{line:39,column:23}},loc:{start:{line:39,column:28},end:{line:39,column:31}},line:39},"9":{name:"(anonymous_9)",decl:{start:{line:42,column:56},end:{line:42,column:57}},loc:{start:{line:43,column:12},end:{line:70,column:32}},line:43},"10":{name:"(anonymous_10)",decl:{start:{line:44,column:22},end:{line:44,column:23}},loc:{start:{line:44,column:28},end:{line:44,column:62}},line:44},"11":{name:"(anonymous_11)",decl:{start:{line:45,column:22},end:{line:45,column:23}},loc:{start:{line:45,column:32},end:{line:56,column:17}},line:45},"12":{name:"(anonymous_12)",decl:{start:{line:57,column:22},end:{line:57,column:23}},loc:{start:{line:57,column:28},end:{line:57,column:75}},line:57},"13":{name:"(anonymous_13)",decl:{start:{line:58,column:22},end:{line:58,column:23}},loc:{start:{line:58,column:30},end:{line:69,column:17}},line:58},"14":{name:"(anonymous_14)",decl:{start:{line:70,column:22},end:{line:70,column:23}},loc:{start:{line:70,column:28},end:{line:70,column:31}},line:70},"15":{name:"(anonymous_15)",decl:{start:{line:74,column:45},end:{line:74,column:46}},loc:{start:{line:74,column:51},end:{line:86,column:5}},line:74},"16":{name:"(anonymous_16)",decl:{start:{line:75,column:19},end:{line:75,column:20}},loc:{start:{line:75,column:25},end:{line:75,column:58}},line:75},"17":{name:"(anonymous_17)",decl:{start:{line:75,column:48},end:{line:75,column:49}},loc:{start:{line:75,column:54},end:{line:75,column:57}},line:75},"18":{name:"(anonymous_18)",decl:{start:{line:77,column:70},end:{line:77,column:71}},loc:{start:{line:78,column:12},end:{line:84,column:32}},line:78},"19":{name:"(anonymous_19)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:79,column:78}},line:79},"20":{name:"(anonymous_20)",decl:{start:{line:80,column:23},end:{line:80,column:24}},loc:{start:{line:80,column:40},end:{line:83,column:17}},line:80},"21":{name:"(anonymous_21)",decl:{start:{line:84,column:22},end:{line:84,column:23}},loc:{start:{line:84,column:28},end:{line:84,column:31}},line:84},"22":{name:"(anonymous_22)",decl:{start:{line:88,column:45},end:{line:88,column:46}},loc:{start:{line:88,column:51},end:{line:103,column:5}},line:88},"23":{name:"(anonymous_23)",decl:{start:{line:89,column:19},end:{line:89,column:20}},loc:{start:{line:90,column:12},end:{line:93,column:32}},line:90},"24":{name:"(anonymous_24)",decl:{start:{line:91,column:22},end:{line:91,column:23}},loc:{start:{line:91,column:34},end:{line:91,column:42}},line:91},"25":{name:"(anonymous_25)",decl:{start:{line:92,column:22},end:{line:92,column:23}},loc:{start:{line:92,column:28},end:{line:92,column:88}},line:92},"26":{name:"(anonymous_26)",decl:{start:{line:93,column:22},end:{line:93,column:23}},loc:{start:{line:93,column:28},end:{line:93,column:31}},line:93},"27":{name:"(anonymous_27)",decl:{start:{line:95,column:70},end:{line:95,column:71}},loc:{start:{line:96,column:12},end:{line:101,column:18}},line:96},"28":{name:"(anonymous_28)",decl:{start:{line:97,column:22},end:{line:97,column:23}},loc:{start:{line:97,column:28},end:{line:97,column:78}},line:97},"29":{name:"(anonymous_29)",decl:{start:{line:98,column:23},end:{line:98,column:24}},loc:{start:{line:98,column:40},end:{line:101,column:17}},line:98},"30":{name:"(anonymous_30)",decl:{start:{line:105,column:30},end:{line:105,column:31}},loc:{start:{line:105,column:36},end:{line:154,column:5}},line:105},"31":{name:"(anonymous_31)",decl:{start:{line:106,column:19},end:{line:106,column:20}},loc:{start:{line:107,column:12},end:{line:109,column:32}},line:107},"32":{name:"(anonymous_32)",decl:{start:{line:108,column:22},end:{line:108,column:23}},loc:{start:{line:108,column:34},end:{line:108,column:42}},line:108},"33":{name:"(anonymous_33)",decl:{start:{line:109,column:22},end:{line:109,column:23}},loc:{start:{line:109,column:28},end:{line:109,column:31}},line:109},"34":{name:"(anonymous_34)",decl:{start:{line:112,column:48},end:{line:112,column:49}},loc:{start:{line:112,column:54},end:{line:124,column:9}},line:112},"35":{name:"(anonymous_35)",decl:{start:{line:114,column:19},end:{line:114,column:20}},loc:{start:{line:114,column:25},end:{line:114,column:63}},line:114},"36":{name:"(anonymous_36)",decl:{start:{line:117,column:19},end:{line:117,column:20}},loc:{start:{line:117,column:25},end:{line:117,column:63}},line:117},"37":{name:"(anonymous_37)",decl:{start:{line:120,column:19},end:{line:120,column:20}},loc:{start:{line:120,column:25},end:{line:120,column:63}},line:120},"38":{name:"(anonymous_38)",decl:{start:{line:123,column:19},end:{line:123,column:20}},loc:{start:{line:123,column:25},end:{line:123,column:63}},line:123},"39":{name:"(anonymous_39)",decl:{start:{line:126,column:45},end:{line:126,column:46}},loc:{start:{line:126,column:51},end:{line:138,column:9}},line:126},"40":{name:"(anonymous_40)",decl:{start:{line:128,column:19},end:{line:128,column:20}},loc:{start:{line:128,column:25},end:{line:128,column:43}},line:128},"41":{name:"(anonymous_41)",decl:{start:{line:131,column:19},end:{line:131,column:20}},loc:{start:{line:131,column:25},end:{line:131,column:43}},line:131},"42":{name:"(anonymous_42)",decl:{start:{line:134,column:19},end:{line:134,column:20}},loc:{start:{line:134,column:25},end:{line:134,column:43}},line:134},"43":{name:"(anonymous_43)",decl:{start:{line:137,column:19},end:{line:137,column:20}},loc:{start:{line:137,column:25},end:{line:137,column:43}},line:137},"44":{name:"(anonymous_44)",decl:{start:{line:140,column:54},end:{line:140,column:55}},loc:{start:{line:140,column:60},end:{line:153,column:9}},line:140},"45":{name:"(anonymous_45)",decl:{start:{line:143,column:19},end:{line:143,column:20}},loc:{start:{line:143,column:25},end:{line:143,column:63}},line:143},"46":{name:"(anonymous_46)",decl:{start:{line:146,column:19},end:{line:146,column:20}},loc:{start:{line:146,column:25},end:{line:146,column:63}},line:146},"47":{name:"(anonymous_47)",decl:{start:{line:149,column:19},end:{line:149,column:20}},loc:{start:{line:149,column:25},end:{line:149,column:63}},line:149},"48":{name:"(anonymous_48)",decl:{start:{line:152,column:19},end:{line:152,column:20}},loc:{start:{line:152,column:25},end:{line:152,column:63}},line:152},"49":{name:"(anonymous_49)",decl:{start:{line:156,column:10},end:{line:156,column:11}},loc:{start:{line:157,column:8},end:{line:158,column:46}},line:157},"50":{name:"(anonymous_50)",decl:{start:{line:158,column:18},end:{line:158,column:19}},loc:{start:{line:158,column:24},end:{line:158,column:45}},line:158}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b67b6ac9b81aa0d5f4c5b3c8c9cb85b93de7ca6a"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1fngmnipgh=function(){return actualCoverage;};return actualCoverage;}cov_1fngmnipgh();cov_1fngmnipgh().s[0]++;require('dotenv').config();const{env:{TEST_MONGODB_URL}}=(cov_1fngmnipgh().s[1]++,process);const{expect}=(cov_1fngmnipgh().s[2]++,require('chai'));const{random,floor}=(cov_1fngmnipgh().s[3]++,Math);const publishToilet=(cov_1fngmnipgh().s[4]++,require('./publish-toilet'));const{mongoose,models:{User,Toilet,Comment}}=(cov_1fngmnipgh().s[5]++,require('poopinion-data'));cov_1fngmnipgh().s[6]++;describe('publishToilet',()=>{cov_1fngmnipgh().f[0]++;cov_1fngmnipgh().s[7]++;before(()=>{cov_1fngmnipgh().f[1]++;cov_1fngmnipgh().s[8]++;return mongoose.connect(TEST_MONGODB_URL,{useNewUrlParser:true,useUnifiedTopology:true}).then(()=>{cov_1fngmnipgh().f[2]++;cov_1fngmnipgh().s[9]++;return Promise.all([User.deleteMany(),Toilet.deleteMany(),Comment.deleteMany()]);}).then(()=>{cov_1fngmnipgh().f[3]++;});});let name,surname,email,password,age,gender,_id,place,latitude,longitude,latitudeDelta,longitudeDelta,coordinates;const GENDERS=(cov_1fngmnipgh().s[10]++,['male','female','non-binary']);cov_1fngmnipgh().s[11]++;beforeEach(()=>{cov_1fngmnipgh().f[4]++;cov_1fngmnipgh().s[12]++;name=`name-${random()}`;cov_1fngmnipgh().s[13]++;surname=`surname-${random()}`;cov_1fngmnipgh().s[14]++;email=`email-${random()}@mail.com`;cov_1fngmnipgh().s[15]++;password=`password-${random()}`;cov_1fngmnipgh().s[16]++;age=floor(random()*120);cov_1fngmnipgh().s[17]++;gender=GENDERS[floor(random()*GENDERS.length)];cov_1fngmnipgh().s[18]++;place=`house of ${name}`;cov_1fngmnipgh().s[19]++;latitude=random();cov_1fngmnipgh().s[20]++;latitudeDelta=random();cov_1fngmnipgh().s[21]++;longitude=random();cov_1fngmnipgh().s[22]++;longitudeDelta=random();cov_1fngmnipgh().s[23]++;coordinates={latitude,longitude,latitudeDelta,longitudeDelta};});cov_1fngmnipgh().s[24]++;describe('when user already exists',()=>{cov_1fngmnipgh().f[5]++;cov_1fngmnipgh().s[25]++;beforeEach(()=>{cov_1fngmnipgh().f[6]++;cov_1fngmnipgh().s[26]++;return User.create({name,surname,email,password,age,gender}).then(({id})=>{cov_1fngmnipgh().f[7]++;cov_1fngmnipgh().s[27]++;return _id=id;}).then(()=>{cov_1fngmnipgh().f[8]++;});});cov_1fngmnipgh().s[28]++;it('should successfully publish a toilet post',()=>{cov_1fngmnipgh().f[9]++;cov_1fngmnipgh().s[29]++;return publishToilet(_id,place,coordinates).then(()=>{cov_1fngmnipgh().f[10]++;cov_1fngmnipgh().s[30]++;return Toilet.findOne({publisher:_id});}).then(toilet=>{cov_1fngmnipgh().f[11]++;cov_1fngmnipgh().s[31]++;expect(toilet.publisher.toString()).to.equal(_id);cov_1fngmnipgh().s[32]++;expect(toilet.place).to.equal(place);cov_1fngmnipgh().s[33]++;expect(toilet.comments instanceof Array).to.equal(true);cov_1fngmnipgh().s[34]++;expect(toilet.geolocation instanceof Object).to.equal(true);cov_1fngmnipgh().s[35]++;expect(toilet.geolocation.latitude).to.equal(latitude);cov_1fngmnipgh().s[36]++;expect(toilet.geolocation.longitude).to.equal(longitude);cov_1fngmnipgh().s[37]++;expect(toilet.geolocation.latitudeDelta).to.equal(latitudeDelta);cov_1fngmnipgh().s[38]++;expect(toilet.geolocation.longitudeDelta).to.equal(longitudeDelta);}).then(()=>{cov_1fngmnipgh().f[12]++;cov_1fngmnipgh().s[39]++;return User.findById(_id).populate('publishedToilets');}).then(user=>{cov_1fngmnipgh().f[13]++;cov_1fngmnipgh().s[40]++;expect(user.publishedToilets instanceof Array).to.equal(true);cov_1fngmnipgh().s[41]++;expect(user.publishedToilets[0]).not.to.be.undefined;cov_1fngmnipgh().s[42]++;expect(user.publishedToilets[0].publisher.toString()).to.equal(_id);cov_1fngmnipgh().s[43]++;expect(user.publishedToilets[0].place).to.equal(place);cov_1fngmnipgh().s[44]++;expect(user.publishedToilets[0].comments instanceof Array).to.equal(true);cov_1fngmnipgh().s[45]++;expect(user.publishedToilets[0].geolocation instanceof Object).to.equal(true);cov_1fngmnipgh().s[46]++;expect(user.publishedToilets[0].geolocation.latitude).to.equal(latitude);cov_1fngmnipgh().s[47]++;expect(user.publishedToilets[0].geolocation.longitude).to.equal(longitude);cov_1fngmnipgh().s[48]++;expect(user.publishedToilets[0].geolocation.latitudeDelta).to.equal(latitudeDelta);cov_1fngmnipgh().s[49]++;expect(user.publishedToilets[0].geolocation.longitudeDelta).to.equal(longitudeDelta);}).then(()=>{cov_1fngmnipgh().f[14]++;});});});cov_1fngmnipgh().s[50]++;describe('when the user does not exist',()=>{cov_1fngmnipgh().f[15]++;cov_1fngmnipgh().s[51]++;beforeEach(()=>{cov_1fngmnipgh().f[16]++;cov_1fngmnipgh().s[52]++;return User.deleteMany().then(()=>{cov_1fngmnipgh().f[17]++;});});cov_1fngmnipgh().s[53]++;it('should fail to post a toilet if the user does not exist',()=>{cov_1fngmnipgh().f[18]++;cov_1fngmnipgh().s[54]++;return publishToilet(_id,place,coordinates).then(()=>{cov_1fngmnipgh().f[19]++;cov_1fngmnipgh().s[55]++;throw new Error('should not reach this point');}).catch(({message})=>{cov_1fngmnipgh().f[20]++;cov_1fngmnipgh().s[56]++;expect(message).not.to.be.undefined;cov_1fngmnipgh().s[57]++;expect(message).to.equal(`user with id ${_id} does not exist`);}).then(()=>{cov_1fngmnipgh().f[21]++;});});});cov_1fngmnipgh().s[58]++;describe('when the user is deactivated',()=>{cov_1fngmnipgh().f[22]++;cov_1fngmnipgh().s[59]++;beforeEach(()=>{cov_1fngmnipgh().f[23]++;cov_1fngmnipgh().s[60]++;return User.create({name,surname,email,password,age,gender}).then(({id})=>{cov_1fngmnipgh().f[24]++;cov_1fngmnipgh().s[61]++;return _id=id;}).then(()=>{cov_1fngmnipgh().f[25]++;cov_1fngmnipgh().s[62]++;return User.findByIdAndUpdate(_id,{$set:{deactivated:true}});}).then(()=>{cov_1fngmnipgh().f[26]++;});});cov_1fngmnipgh().s[63]++;it('should fail to post a toilet if the user is deactivated',()=>{cov_1fngmnipgh().f[27]++;cov_1fngmnipgh().s[64]++;return publishToilet(_id,place,coordinates).then(()=>{cov_1fngmnipgh().f[28]++;cov_1fngmnipgh().s[65]++;throw new Error('should not reach this point');}).catch(({message})=>{cov_1fngmnipgh().f[29]++;cov_1fngmnipgh().s[66]++;expect(message).not.to.be.undefined;cov_1fngmnipgh().s[67]++;expect(message).to.equal(`user with id ${_id} is deactivated`);});});});cov_1fngmnipgh().s[68]++;describe('unhappy paths',()=>{cov_1fngmnipgh().f[30]++;cov_1fngmnipgh().s[69]++;beforeEach(()=>{cov_1fngmnipgh().f[31]++;cov_1fngmnipgh().s[70]++;return User.create({name,surname,email,password,age,gender}).then(({id})=>{cov_1fngmnipgh().f[32]++;cov_1fngmnipgh().s[71]++;return _id=id;}).then(()=>{cov_1fngmnipgh().f[33]++;});});cov_1fngmnipgh().s[72]++;it('should fail on a non-string place',()=>{cov_1fngmnipgh().f[34]++;cov_1fngmnipgh().s[73]++;place=9328743289;cov_1fngmnipgh().s[74]++;expect(()=>{cov_1fngmnipgh().f[35]++;cov_1fngmnipgh().s[75]++;return publishToilet(_id,place,coordinates);}).to.throw(TypeError,`place ${place} is not a string`);cov_1fngmnipgh().s[76]++;place=false;cov_1fngmnipgh().s[77]++;expect(()=>{cov_1fngmnipgh().f[36]++;cov_1fngmnipgh().s[78]++;return publishToilet(_id,place,coordinates);}).to.throw(TypeError,`place ${place} is not a string`);cov_1fngmnipgh().s[79]++;place=undefined;cov_1fngmnipgh().s[80]++;expect(()=>{cov_1fngmnipgh().f[37]++;cov_1fngmnipgh().s[81]++;return publishToilet(_id,place,coordinates);}).to.throw(TypeError,`place ${place} is not a string`);cov_1fngmnipgh().s[82]++;place=[];cov_1fngmnipgh().s[83]++;expect(()=>{cov_1fngmnipgh().f[38]++;cov_1fngmnipgh().s[84]++;return publishToilet(_id,place,coordinates);}).to.throw(TypeError,`place ${place} is not a string`);});cov_1fngmnipgh().s[85]++;it('should fail on a non-string id',()=>{cov_1fngmnipgh().f[39]++;cov_1fngmnipgh().s[86]++;_id=9328743289;cov_1fngmnipgh().s[87]++;expect(()=>{cov_1fngmnipgh().f[40]++;cov_1fngmnipgh().s[88]++;return publishToilet(_id);}).to.throw(TypeError,`id ${_id} is not a string`);cov_1fngmnipgh().s[89]++;_id=false;cov_1fngmnipgh().s[90]++;expect(()=>{cov_1fngmnipgh().f[41]++;cov_1fngmnipgh().s[91]++;return publishToilet(_id);}).to.throw(TypeError,`id ${_id} is not a string`);cov_1fngmnipgh().s[92]++;_id=undefined;cov_1fngmnipgh().s[93]++;expect(()=>{cov_1fngmnipgh().f[42]++;cov_1fngmnipgh().s[94]++;return publishToilet(_id);}).to.throw(TypeError,`id ${_id} is not a string`);cov_1fngmnipgh().s[95]++;_id=[];cov_1fngmnipgh().s[96]++;expect(()=>{cov_1fngmnipgh().f[43]++;cov_1fngmnipgh().s[97]++;return publishToilet(_id);}).to.throw(TypeError,`id ${_id} is not a string`);});cov_1fngmnipgh().s[98]++;it('should fail on a non-object coordinates',()=>{cov_1fngmnipgh().f[44]++;cov_1fngmnipgh().s[99]++;place='somewhere';cov_1fngmnipgh().s[100]++;coordinates=9328743289;cov_1fngmnipgh().s[101]++;expect(()=>{cov_1fngmnipgh().f[45]++;cov_1fngmnipgh().s[102]++;return publishToilet(_id,place,coordinates);}).to.throw(TypeError,`coordinates ${coordinates} is not a Object`);cov_1fngmnipgh().s[103]++;coordinates=false;cov_1fngmnipgh().s[104]++;expect(()=>{cov_1fngmnipgh().f[46]++;cov_1fngmnipgh().s[105]++;return publishToilet(_id,place,coordinates);}).to.throw(TypeError,`coordinates ${coordinates} is not a Object`);cov_1fngmnipgh().s[106]++;coordinates=undefined;cov_1fngmnipgh().s[107]++;expect(()=>{cov_1fngmnipgh().f[47]++;cov_1fngmnipgh().s[108]++;return publishToilet(_id,place,coordinates);}).to.throw(TypeError,`coordinates ${coordinates} is not a Object`);cov_1fngmnipgh().s[109]++;coordinates='asasa';cov_1fngmnipgh().s[110]++;expect(()=>{cov_1fngmnipgh().f[48]++;cov_1fngmnipgh().s[111]++;return publishToilet(_id,place,coordinates);}).to.throw(TypeError,`coordinates ${coordinates} is not a Object`);});});cov_1fngmnipgh().s[112]++;after(()=>{cov_1fngmnipgh().f[49]++;cov_1fngmnipgh().s[113]++;return Promise.all([User.deleteMany(),Toilet.deleteMany(),Comment.deleteMany()]).then(()=>{cov_1fngmnipgh().f[50]++;cov_1fngmnipgh().s[114]++;return mongoose.disconnect();});});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInB1Ymxpc2gtdG9pbGV0LnNwZWMuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImVudiIsIlRFU1RfTU9OR09EQl9VUkwiLCJwcm9jZXNzIiwiZXhwZWN0IiwicmFuZG9tIiwiZmxvb3IiLCJNYXRoIiwicHVibGlzaFRvaWxldCIsIm1vbmdvb3NlIiwibW9kZWxzIiwiVXNlciIsIlRvaWxldCIsIkNvbW1lbnQiLCJkZXNjcmliZSIsImJlZm9yZSIsImNvbm5lY3QiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJ0aGVuIiwiUHJvbWlzZSIsImFsbCIsImRlbGV0ZU1hbnkiLCJuYW1lIiwic3VybmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJhZ2UiLCJnZW5kZXIiLCJfaWQiLCJwbGFjZSIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwibGF0aXR1ZGVEZWx0YSIsImxvbmdpdHVkZURlbHRhIiwiY29vcmRpbmF0ZXMiLCJHRU5ERVJTIiwiYmVmb3JlRWFjaCIsImxlbmd0aCIsImNyZWF0ZSIsImlkIiwiaXQiLCJmaW5kT25lIiwicHVibGlzaGVyIiwidG9pbGV0IiwidG9TdHJpbmciLCJ0byIsImVxdWFsIiwiY29tbWVudHMiLCJBcnJheSIsImdlb2xvY2F0aW9uIiwiT2JqZWN0IiwiZmluZEJ5SWQiLCJwb3B1bGF0ZSIsInVzZXIiLCJwdWJsaXNoZWRUb2lsZXRzIiwibm90IiwiYmUiLCJ1bmRlZmluZWQiLCJFcnJvciIsImNhdGNoIiwibWVzc2FnZSIsImZpbmRCeUlkQW5kVXBkYXRlIiwiJHNldCIsImRlYWN0aXZhdGVkIiwidGhyb3ciLCJUeXBlRXJyb3IiLCJhZnRlciIsImRpc2Nvbm5lY3QiXSwibWFwcGluZ3MiOiJ3K2ZBQUFBLE9BQU8sQ0FBQyxRQUFELENBQVAsQ0FBa0JDLE1BQWxCLEdBRUEsS0FBTSxDQUFFQyxHQUFHLENBQUUsQ0FBRUMsZ0JBQUYsQ0FBUCwyQkFBZ0NDLE9BQWhDLENBQU4sQ0FDQSxLQUFN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cURXLEVBQXJELENBQXdEbUIsS0FBeEQsQ0FBOERDLFNBQTlELENBQTBFLGVBQWMvQixXQUFZLGtCQUFwRyxFQU5nRCwwQkFRaERBLFdBQVcsQ0FBR3VCLFNBQWQsQ0FSZ0QsMEJBU2hEdEQsTUFBTSxDQUFDLElBQU0sMERBQUFJLENBQUFBLGFBQWEsQ0FBQ3FCLEdBQUQsQ0FBTUMsS0FBTixDQUFhSyxXQUFiLENBQWIsQ0FBc0MsQ0FBN0MsQ0FBTixDQUFxRFcsRUFBckQsQ0FBd0RtQixLQUF4RCxDQUE4REMsU0FBOUQsQ0FBMEUsZUFBYy9CLFdBQVksa0JBQXBHLEVBVGdELDBCQVdoREEsV0FBVyxDQUFHLE9BQWQsQ0FYZ0QsMEJBWWhEL0IsTUFBTSxDQUFDLElBQU0sMERBQUFJLENBQUFBLGFBQWEsQ0FBQ3FCLEdBQUQsQ0FBTUMsS0FBTixDQUFhSyxXQUFiLENBQWIsQ0FBc0MsQ0FBN0MsQ0FBTixDQUFxRFcsRUFBckQsQ0FBd0RtQixLQUF4RCxDQUE4REMsU0FBOUQsQ0FBMEUsZUFBYy9CLFdBQVksa0JBQXBHLEVBQ0gsQ0FiQyxDQUFGLENBY0gsQ0FqRE8sQ0FBUixDQWhHNEIsMEJBbUo1QmdDLEtBQUssQ0FBQyxJQUNGLDBEQUFBL0MsQ0FBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksQ0FBQ1YsSUFBSSxDQUFDVyxVQUFMLEVBQUQsQ0FBb0JWLE1BQU0sQ0FBQ1UsVUFBUCxFQUFwQixDQUF5Q1QsT0FBTyxDQUFDUyxVQUFSLEVBQXpDLENBQVosRUFDS0gsSUFETCxDQUNVLElBQU0sMERBQUFWLENBQUFBLFFBQVEsQ0FBQzJELFVBQVQsR0FBcUIsQ0FEckMsRUFDc0MsQ0FGckMsQ0FBTCxDQUlILENBdkpPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKVxyXG5cclxuY29uc3QgeyBlbnY6IHsgVEVTVF9NT05HT0RCX1VSTCB9IH0gPSBwcm9jZXNzXHJcbmNvbnN0IHsgZXhwZWN0IH0gPSByZXF1aXJlKCdjaGFpJylcclxuY29uc3QgeyByYW5kb20sIGZsb29yIH0gPSBNYXRoXHJcbmNvbnN0IHB1Ymxpc2hUb2lsZXQgPSByZXF1aXJlKCcuL3B1Ymxpc2gtdG9pbGV0JylcclxuY29uc3QgeyBtb25nb29zZSwgbW9kZWxzOiB7IFVzZXIsIFRvaWxldCwgQ29tbWVudCB9IH0gPSByZXF1aXJlKCdwb29waW5pb24tZGF0YScpXHJcblxyXG5kZXNjcmliZSgncHVibGlzaFRvaWxldCcsICgpID0+IHtcclxuICAgIGJlZm9yZSgoKSA9PlxyXG4gICAgICAgIG1vbmdvb3NlLmNvbm5lY3QoVEVTVF9NT05HT0RCX1VSTCwgeyB1c2VOZXdVcmxQYXJzZXI6IHRydWUsIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiBQcm9taXNlLmFsbChbVXNlci5kZWxldGVNYW55KCksIFRvaWxldC5kZWxldGVNYW55KCksIENvbW1lbnQuZGVsZXRlTWFueSgpXSkpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgfSlcclxuICAgIClcclxuXHJcbiAgICBsZXQgbmFtZSwgc3VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBhZ2UsIGdlbmRlciwgX2lkLCBwbGFjZSwgbGF0aXR1ZGUsIGxvbmdpdHVkZSwgbGF0aXR1ZGVEZWx0YSwgbG9uZ2l0dWRlRGVsdGEsIGNvb3JkaW5hdGVzXHJcbiAgICBjb25zdCBHRU5ERVJTID0gWydtYWxlJywgJ2ZlbWFsZScsICdub24tYmluYXJ5J11cclxuXHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgICBuYW1lID0gYG5hbWUtJHtyYW5kb20oKX1gXHJcbiAgICAgICAgc3VybmFtZSA9IGBzdXJuYW1lLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGVtYWlsID0gYGVtYWlsLSR7cmFuZG9tKCl9QG1haWwuY29tYFxyXG4gICAgICAgIHBhc3N3b3JkID0gYHBhc3N3b3JkLSR7cmFuZG9tKCl9YFxyXG4gICAgICAgIGFnZSA9IGZsb29yKHJhbmRvbSgpICogMTIwKVxyXG4gICAgICAgIGdlbmRlciA9IEdFTkRFUlNbZmxvb3IocmFuZG9tKCkgKiBHRU5ERVJTLmxlbmd0aCldXHJcbiAgICAgICAgcGxhY2UgPSBgaG91c2Ugb2YgJHtuYW1lfWBcclxuICAgICAgICBsYXRpdHVkZSA9IHJhbmRvbSgpXHJcbiAgICAgICAgbGF0aXR1ZGVEZWx0YSA9IHJhbmRvbSgpXHJcbiAgICAgICAgbG9uZ2l0dWRlID0gcmFuZG9tKClcclxuICAgICAgICBsb25naXR1ZGVEZWx0YSA9IHJhbmRvbSgpXHJcbiAgICAgICAgY29vcmRpbmF0ZXMgPSB7IGxhdGl0dWRlLCBsb25naXR1ZGUsIGxhdGl0dWRlRGVsdGEsIGxvbmdpdHVkZURlbHRhIH1cclxuICAgIH0pXHJcblxyXG4gICAgZGVzY3JpYmUoJ3doZW4gdXNlciBhbHJlYWR5IGV4aXN0cycsICgpID0+IHtcclxuXHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PlxyXG4gICAgICAgICAgICBVc2VyLmNyZWF0ZSh7IG5hbWUsIHN1cm5hbWUsIGVtYWlsLCBwYXNzd29yZCwgYWdlLCBnZW5kZXIgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKCh7IGlkIH0pID0+IF9pZCA9IGlkKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4geyB9KVxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgaXQoJ3Nob3VsZCBzdWNjZXNzZnVsbHkgcHVibGlzaCBhIHRvaWxldCBwb3N0JywgKCkgPT5cclxuICAgICAgICAgICAgcHVibGlzaFRvaWxldChfaWQsIHBsYWNlLCBjb29yZGluYXRlcylcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IFRvaWxldC5maW5kT25lKHsgcHVibGlzaGVyOiBfaWQgfSkpXHJcbiAgICAgICAgICAgICAgICAudGhlbih0b2lsZXQgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QodG9pbGV0LnB1Ymxpc2hlci50b1N0cmluZygpKS50by5lcXVhbChfaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHRvaWxldC5wbGFjZSkudG8uZXF1YWwocGxhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHRvaWxldC5jb21tZW50cyBpbnN0YW5jZW9mIEFycmF5KS50by5lcXVhbCh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdCh0b2lsZXQuZ2VvbG9jYXRpb24gaW5zdGFuY2VvZiBPYmplY3QpLnRvLmVxdWFsKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHRvaWxldC5nZW9sb2NhdGlvbi5sYXRpdHVkZSkudG8uZXF1YWwobGF0aXR1ZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHRvaWxldC5nZW9sb2NhdGlvbi5sb25naXR1ZGUpLnRvLmVxdWFsKGxvbmdpdHVkZSlcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QodG9pbGV0Lmdlb2xvY2F0aW9uLmxhdGl0dWRlRGVsdGEpLnRvLmVxdWFsKGxhdGl0dWRlRGVsdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHRvaWxldC5nZW9sb2NhdGlvbi5sb25naXR1ZGVEZWx0YSkudG8uZXF1YWwobG9uZ2l0dWRlRGVsdGEpXHJcblxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IFVzZXIuZmluZEJ5SWQoX2lkKS5wb3B1bGF0ZSgncHVibGlzaGVkVG9pbGV0cycpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4odXNlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHVzZXIucHVibGlzaGVkVG9pbGV0cyBpbnN0YW5jZW9mIEFycmF5KS50by5lcXVhbCh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdCh1c2VyLnB1Ymxpc2hlZFRvaWxldHNbMF0pLm5vdC50by5iZS51bmRlZmluZWRcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QodXNlci5wdWJsaXNoZWRUb2lsZXRzWzBdLnB1Ymxpc2hlci50b1N0cmluZygpKS50by5lcXVhbChfaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHVzZXIucHVibGlzaGVkVG9pbGV0c1swXS5wbGFjZSkudG8uZXF1YWwocGxhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHVzZXIucHVibGlzaGVkVG9pbGV0c1swXS5jb21tZW50cyBpbnN0YW5jZW9mIEFycmF5KS50by5lcXVhbCh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdCh1c2VyLnB1Ymxpc2hlZFRvaWxldHNbMF0uZ2VvbG9jYXRpb24gaW5zdGFuY2VvZiBPYmplY3QpLnRvLmVxdWFsKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHVzZXIucHVibGlzaGVkVG9pbGV0c1swXS5nZW9sb2NhdGlvbi5sYXRpdHVkZSkudG8uZXF1YWwobGF0aXR1ZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHVzZXIucHVibGlzaGVkVG9pbGV0c1swXS5nZW9sb2NhdGlvbi5sb25naXR1ZGUpLnRvLmVxdWFsKGxvbmdpdHVkZSlcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QodXNlci5wdWJsaXNoZWRUb2lsZXRzWzBdLmdlb2xvY2F0aW9uLmxhdGl0dWRlRGVsdGEpLnRvLmVxdWFsKGxhdGl0dWRlRGVsdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHVzZXIucHVibGlzaGVkVG9pbGV0c1swXS5nZW9sb2NhdGlvbi5sb25naXR1ZGVEZWx0YSkudG8uZXF1YWwobG9uZ2l0dWRlRGVsdGEpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4geyB9KVxyXG4gICAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgZGVzY3JpYmUoJ3doZW4gdGhlIHVzZXIgZG9lcyBub3QgZXhpc3QnLCAoKSA9PiB7XHJcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiBVc2VyLmRlbGV0ZU1hbnkoKS50aGVuKCgpID0+IHsgfSkpXHJcblxyXG4gICAgICAgIGl0KCdzaG91bGQgZmFpbCB0byBwb3N0IGEgdG9pbGV0IGlmIHRoZSB1c2VyIGRvZXMgbm90IGV4aXN0JywgKCkgPT5cclxuICAgICAgICAgICAgcHVibGlzaFRvaWxldChfaWQsIHBsYWNlLCBjb29yZGluYXRlcylcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhyb3cgbmV3IEVycm9yKCdzaG91bGQgbm90IHJlYWNoIHRoaXMgcG9pbnQnKSB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKCh7IG1lc3NhZ2UgfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChtZXNzYWdlKS5ub3QudG8uYmUudW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KG1lc3NhZ2UpLnRvLmVxdWFsKGB1c2VyIHdpdGggaWQgJHtfaWR9IGRvZXMgbm90IGV4aXN0YClcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7IH0pXHJcbiAgICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICBkZXNjcmliZSgnd2hlbiB0aGUgdXNlciBpcyBkZWFjdGl2YXRlZCcsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+XHJcbiAgICAgICAgICAgIFVzZXIuY3JlYXRlKHsgbmFtZSwgc3VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBhZ2UsIGdlbmRlciB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHsgaWQgfSkgPT4gX2lkID0gaWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKF9pZCwgeyAkc2V0OiB7IGRlYWN0aXZhdGVkOiB0cnVlIH0gfSkpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7IH0pXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGl0KCdzaG91bGQgZmFpbCB0byBwb3N0IGEgdG9pbGV0IGlmIHRoZSB1c2VyIGlzIGRlYWN0aXZhdGVkJywgKCkgPT5cclxuICAgICAgICAgICAgcHVibGlzaFRvaWxldChfaWQsIHBsYWNlLCBjb29yZGluYXRlcylcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhyb3cgbmV3IEVycm9yKCdzaG91bGQgbm90IHJlYWNoIHRoaXMgcG9pbnQnKSB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKCh7IG1lc3NhZ2UgfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdChtZXNzYWdlKS5ub3QudG8uYmUudW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KG1lc3NhZ2UpLnRvLmVxdWFsKGB1c2VyIHdpdGggaWQgJHtfaWR9IGlzIGRlYWN0aXZhdGVkYClcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICBkZXNjcmliZSgndW5oYXBweSBwYXRocycsICgpID0+IHtcclxuICAgICAgICBiZWZvcmVFYWNoKCgpID0+XHJcbiAgICAgICAgICAgIFVzZXIuY3JlYXRlKHsgbmFtZSwgc3VybmFtZSwgZW1haWwsIHBhc3N3b3JkLCBhZ2UsIGdlbmRlciB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHsgaWQgfSkgPT4gX2lkID0gaWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7IH0pXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGZhaWwgb24gYSBub24tc3RyaW5nIHBsYWNlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBwbGFjZSA9IDkzMjg3NDMyODlcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHB1Ymxpc2hUb2lsZXQoX2lkLCBwbGFjZSwgY29vcmRpbmF0ZXMpKS50by50aHJvdyhUeXBlRXJyb3IsIGBwbGFjZSAke3BsYWNlfSBpcyBub3QgYSBzdHJpbmdgKVxyXG5cclxuICAgICAgICAgICAgcGxhY2UgPSBmYWxzZVxyXG4gICAgICAgICAgICBleHBlY3QoKCkgPT4gcHVibGlzaFRvaWxldChfaWQsIHBsYWNlLCBjb29yZGluYXRlcykpLnRvLnRocm93KFR5cGVFcnJvciwgYHBsYWNlICR7cGxhY2V9IGlzIG5vdCBhIHN0cmluZ2ApXHJcblxyXG4gICAgICAgICAgICBwbGFjZSA9IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICBleHBlY3QoKCkgPT4gcHVibGlzaFRvaWxldChfaWQsIHBsYWNlLCBjb29yZGluYXRlcykpLnRvLnRocm93KFR5cGVFcnJvciwgYHBsYWNlICR7cGxhY2V9IGlzIG5vdCBhIHN0cmluZ2ApXHJcblxyXG4gICAgICAgICAgICBwbGFjZSA9IFtdXHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiBwdWJsaXNoVG9pbGV0KF9pZCwgcGxhY2UsIGNvb3JkaW5hdGVzKSkudG8udGhyb3coVHlwZUVycm9yLCBgcGxhY2UgJHtwbGFjZX0gaXMgbm90IGEgc3RyaW5nYClcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGZhaWwgb24gYSBub24tc3RyaW5nIGlkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBfaWQgPSA5MzI4NzQzMjg5XHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiBwdWJsaXNoVG9pbGV0KF9pZCkpLnRvLnRocm93KFR5cGVFcnJvciwgYGlkICR7X2lkfSBpcyBub3QgYSBzdHJpbmdgKVxyXG5cclxuICAgICAgICAgICAgX2lkID0gZmFsc2VcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHB1Ymxpc2hUb2lsZXQoX2lkKSkudG8udGhyb3coVHlwZUVycm9yLCBgaWQgJHtfaWR9IGlzIG5vdCBhIHN0cmluZ2ApXHJcblxyXG4gICAgICAgICAgICBfaWQgPSB1bmRlZmluZWRcclxuICAgICAgICAgICAgZXhwZWN0KCgpID0+IHB1Ymxpc2hUb2lsZXQoX2lkKSkudG8udGhyb3coVHlwZUVycm9yLCBgaWQgJHtfaWR9IGlzIG5vdCBhIHN0cmluZ2ApXHJcblxyXG4gICAgICAgICAgICBfaWQgPSBbXVxyXG4gICAgICAgICAgICBleHBlY3QoKCkgPT4gcHVibGlzaFRvaWxldChfaWQpKS50by50aHJvdyhUeXBlRXJyb3IsIGBpZCAke19pZH0gaXMgbm90IGEgc3RyaW5nYClcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBpdCgnc2hvdWxkIGZhaWwgb24gYSBub24tb2JqZWN0IGNvb3JkaW5hdGVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBwbGFjZSA9ICdzb21ld2hlcmUnXHJcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gOTMyODc0MzI4OVxyXG4gICAgICAgICAgICBleHBlY3QoKCkgPT4gcHVibGlzaFRvaWxldChfaWQsIHBsYWNlLCBjb29yZGluYXRlcykpLnRvLnRocm93KFR5cGVFcnJvciwgYGNvb3JkaW5hdGVzICR7Y29vcmRpbmF0ZXN9IGlzIG5vdCBhIE9iamVjdGApXHJcblxyXG4gICAgICAgICAgICBjb29yZGluYXRlcyA9IGZhbHNlXHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiBwdWJsaXNoVG9pbGV0KF9pZCwgcGxhY2UsIGNvb3JkaW5hdGVzKSkudG8udGhyb3coVHlwZUVycm9yLCBgY29vcmRpbmF0ZXMgJHtjb29yZGluYXRlc30gaXMgbm90IGEgT2JqZWN0YClcclxuXHJcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiBwdWJsaXNoVG9pbGV0KF9pZCwgcGxhY2UsIGNvb3JkaW5hdGVzKSkudG8udGhyb3coVHlwZUVycm9yLCBgY29vcmRpbmF0ZXMgJHtjb29yZGluYXRlc30gaXMgbm90IGEgT2JqZWN0YClcclxuXHJcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gJ2FzYXNhJ1xyXG4gICAgICAgICAgICBleHBlY3QoKCkgPT4gcHVibGlzaFRvaWxldChfaWQsIHBsYWNlLCBjb29yZGluYXRlcykpLnRvLnRocm93KFR5cGVFcnJvciwgYGNvb3JkaW5hdGVzICR7Y29vcmRpbmF0ZXN9IGlzIG5vdCBhIE9iamVjdGApXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgYWZ0ZXIoKCkgPT5cclxuICAgICAgICBQcm9taXNlLmFsbChbVXNlci5kZWxldGVNYW55KCksIFRvaWxldC5kZWxldGVNYW55KCksIENvbW1lbnQuZGVsZXRlTWFueSgpXSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gbW9uZ29vc2UuZGlzY29ubmVjdCgpKVxyXG4gICAgKVxyXG59KSJdfQ==